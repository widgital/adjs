!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require){(function(){var AdJS,Session,config,engagement,sf,stream,utils;sf=require("safeframe"),engagement=require("./shared/engagement"),Session=require("./shared/session"),AdJS=require("./publisher/slot"),stream=require("./shared/stream"),config=require("./shared/config"),utils=require("./shared/utils"),function(window){var controllerUrl,doRender,globalConfig,initSafeFrame,pageDuration,pageLoadMs,renderController,safeframeUrl,session,sfDom,startTicks;return session=new Session,session.incr("p"),startTicks=utils.now(),pageLoadMs=0,pageDuration=0,safeframeUrl=config.cdn_url,controllerUrl=config.controller_url,sfDom=$sf.lib.dom,sfDom.attach("beforeunload",function(){return pageDuration=utils.now()-startTicks,!0}),globalConfig={keys:[],safeframe_url:safeframeUrl},doRender=function(cb){var d,div,divs,sfPositions,_i,_len;if(sfPositions={},sfDom.ready()){for(renderController(),divs=function(){var _i,_len,_ref,_results;for(_ref=document.getElementsByTagName("div"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)div=_ref[_i],_results.push(div);return _results}(),_i=0,_len=divs.length;_len>_i;_i++)d=divs[_i],sfDom.attr(d,"data-adjs")&&!function(d){return AdJS.create(d,session)}(d);return"function"==typeof cb?cb():void 0}sfDom.wait(function(){var args;return pageLoadMs=utils.now()-startTicks,doRender.apply(null,args),args=null})},initSafeFrame=function(){return $sf.host.Config({renderFile:globalConfig.safeframe_url,positions:{},onStartPosRender:function(){},onFailure:function(){},onAdLoad:function(id){return AdJS(id).load()},onBeforePosMsg:function(){},onPosMsg:function(id,msg,content){return AdJS(id).handleMessage(msg,content)}})},AdJS.view(function(){return session.incr("av")}),AdJS.engage(function(){return session.incr("ae")}),AdJS.load(function(){return session.incr("a")}),AdJS.click(function(){return session.incr("ac")}),AdJS.load(function(){}),session.change(function(){var ad,_,_ref,_results;_ref=AdJS.slots,_results=[];for(_ in _ref)ad=_ref[_],_results.push(ad.notifyFrame("cookie-update",session.serializeCookie()));return _results}),renderController=function(){var div,parent;return div=document.createElement("div"),parent=document.createElement("div"),parent.appendChild(div),parent.style.display="none",div.id=sf.lib.lang.guid("controller"),document.body.appendChild(parent),AdJS("controller").create(div,"",{width:10,height:10,supports:["write-cookie","read-cookie"],renderFile:controllerUrl,session:null!=session?session.serializeCookie():void 0,pageReferrer:document.referrer,ignoreEvents:!0})},AdJS.render=function(){var adJsScript,clientId,s;return adJsScript=function(){var _i,_len,_ref,_results;for(_ref=document.getElementsByTagName("script"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)s=_ref[_i],sfDom.attr(s,"data-adjs")&&_results.push(s);return _results}()[0],clientId=sfDom.attr(adJsScript,"data-client-id"),session.set({client_id:clientId}),initSafeFrame(),doRender()},engagement.onEngagement(function(){var ad,_,_ref,_results;_ref=AdJS.slots,_results=[];for(_ in _ref)ad=_ref[_],_results.push(ad.currentlyInview()&&!ad.engaged?ad.engage():void 0);return _results}),function(){return AdJS.render()}(),AdJS.session=session,window.$ad=AdJS,AdJS}(window)}).call(this)},{"./publisher/slot":2,"./shared/config":4,"./shared/engagement":5,"./shared/session":7,"./shared/stream":9,"./shared/utils":10,safeframe:15}],2:[function(require,module){(function(){var events,sf,sfDom,sizes,utils,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};sf=require("safeframe"),sizes=require("../shared/sizes"),utils=require("../shared/utils"),events=require("../shared/event")(["request","click","load","view","unload","focus","engage","unfocus","expand","collapse","refreshed","cookie","receive","unview","timeout"]),sfDom=sf.lib.dom,module.exports=function(sf){var SCRIPT_REGEX,Slot,TIMEOUT_TIME,oldTrigger,slots;return TIMEOUT_TIME=5e3,slots={},SCRIPT_REGEX=/<!--([\s\S]*)-->/,Slot=function(){function Slot(adId){return this.trigger=__bind(this.trigger,this),this instanceof Slot?this.init(adId):new Slot(adId)}return Slot.prototype.init=function(adId){return slots[adId]?slots[adId]:(this.id=adId,this.count=1,slots[adId]=this,this.initEvents())},Slot.prototype.startAutoRefresh=function(delay,cb){return null==delay&&(delay=60),this._isAutoRefreshing||(this._isAutoRefreshing=!0,this._refreshInterval=setTimeout(function(_this){return function(){return _this._isAutoRefreshing=!1,_this.loadTime?_this.refresh(cb):void 0}}(this),1e3*delay)),this},Slot.prototype.stopAutoRefresh=function(){return clearTimeout(this._refreshInterval),this._isAutoRefreshing=!1,this._refreshInterval=null,this},Slot.prototype.refresh=function(cb){return this.remove(),this.count++,this.posMeta.setValue("load_n","extended",this.count),sf.host.render(this.pos),this.frame=document.getElementById(this.posConfig.dest),"function"==typeof cb&&cb(this),this.refreshed(),this},Slot.prototype.trigger=function(event){var _ref;return(null!=(_ref=this.options)?_ref.ignoreEvents:void 0)||(events.trigger.apply(this,arguments),Slot.trigger(event,this,arguments[1])),this},Slot.prototype.handleMessage=function(msg,content){switch(msg){case"focus-change":return content?this.focus():this.unfocus();case"geom-update":return function(){};case"expand":return this.expand(content);case"collapse":return this.collapse(content);case"viewed":if(!this.viewed)return this.view();break;case"unviewed":if(!this.unviewed||!this.viewed)return this.unview();break;case"clicked":if(!this.clicked)return this.click();break;case"requested":return this.request();case"cookie-write":return this.cookie({cookie:"write",content:content});case"cookie-read":return this.cookie({cookie:"read",content:content});case"reload":return this.reload();case"msg":return this.receive(decodeURIComponent(content));default:return null}},Slot.prototype.initEvents=function(){return this.request(function(){return this.requestTime=utils.now()}),this.load(function(){return this.loadChain=utils.countFrames(this.frame.contentWindow),this.loadTime=utils.now()}),this.view(function(){return this.viewed=!0,this.viewTime=utils.now()}),this.engage(function(){return this.engaged?void 0:(this.engaged=!0,this.engageTime=utils.now(),this.notifyFrame("engaged"))}),this.unview(function(){return this.unviewed=!0,this.unviewTime=utils.now()}),this.unload(function(){return this.unloadTime=utils.now()}),this.click(function(){return this.clicked=!0})},Slot.prototype.loadChain=0,Slot.prototype.notifyFrame=function(cmd,data){var msgObj;return msgObj=sf.lib.lang.ParamHash(),this.posConfig?(msgObj.pos=this.posConfig.id,msgObj.cmd=cmd,msgObj.value=escape(data),sfDom.msghost.send(this.posConfig.dest,msgObj.toString())):void 0},Slot.prototype.create=function(elem,html,options){var height,s,supports,width,_i,_j,_len,_len1,_ref,_ref1;for(this.options=null!=options?options:{},width=this.options.width||elem.offsetWidth,height=this.options.height||elem.offsetHeight,supports={},_ref=this.options.supports||[],_i=0,_len=_ref.length;_len>_i;_i++)s=_ref[_i],supports[s]=!0;for(_ref1=this.options.disables||[],_j=0,_len1=_ref1.length;_len1>_j;_j++)s=_ref1[_j],supports[s]=!1;return this.elem?void 0:(this.elem=elem,elem.id||(elem.id=sf.lib.lang.guid("pos")),this.posMeta=new sf.host.PosMeta(null,"extended",{inview:this.options.inview,session:this.options.session,host:document.location.hostname,referrer:this.options.referrer,location:document.location.href,slot_id:this.id,load_n:this.count}),this.posConfig=new sf.host.PosConfig({id:this.id,dest:elem.id,w:width,h:height,supports:supports,renderFile:this.options.renderFile}),this.pos=new sf.host.Position(this.posConfig.id,html,this.posMeta),this.options.refresh_oov&&this.unview(function(){return setTimeout(function(_this){return function(){return _this.refresh()}}(this),1)}),null!=this.options.refresh_time&&(this.refreshTime=sf.lib.lang.cnum(this.options.refresh_time,0),this.refreshTime>0&&(this.load(function(){return this.startAutoRefresh(this.refreshTime)}),this.timeout(function(){return this.stopAutoRefresh(),this.refresh()}))),sf.host.render(this.pos),this.frame=document.getElementById(elem.id),this)},Slot.prototype.remove=function(dontFire){return dontFire||this.unload(),clearTimeout(this._refreshInterval),this.viewed=!1,this.engaged=!1,this.unviewed=!1,this.frame=null,this.frameCount=0,this.requestTime=null,this.loadTime=null,this.viewTime=null,this.engageTime=null,this.unviewTime=null,this.unloadTime=null,sf.host.nuke(this.id),this},Slot.prototype.destroy=function(){return this.stopAutoRefresh(),this.remove(),delete this.events,delete slots[this.id]},Slot.prototype.reload=function(){return this.options.inview?(this.remove(!0),sf.host.render(this.pos),this.frame=document.getElementById(this.posConfig.dest)):void 0},Slot.prototype.currentlyInview=function(){return sf.host.inViewPercentage(this.id)>50&&this.viewed},Slot.prototype.inviewPercentage=function(){return sf.host.inViewPercentage(this.id)},Slot}(),Slot.destroy=function(){var ad,_,_results;_results=[];for(_ in slots)ad=slots[_],_results.push(ad.destroy());return _results},Slot.events={},oldTrigger=Slot.prototype.trigger,sf.lib.lang.mix(Slot.prototype,events),Slot.prototype.trigger=oldTrigger,sf.lib.lang.mix(Slot,events),Slot.create=function(d,session){var adId,disables,div,height,posId,size,supports,template,width,_base,_base1,_ref;return template=(null!=(_ref=d.innerHTML.match(SCRIPT_REGEX))?_ref[1]:void 0)||d.innerHTML,posId=sf.lib.lang.guid("pos"),adId=d.id||posId,div=document.createElement("div"),div.id=posId,d.appendChild(div),supports=[],disables=[],(size=sizes[sfDom.attr(d,"data-ad-type")])&&(width=size[0],height=size[1]),Slot(adId).create(div,template,{width:width||sfDom.attr(d,"data-width"),height:height||sfDom.attr(d,"data-height"),supports:"function"==typeof(_base=sfDom.attr(d,"data-supports")).split?_base.split(","):void 0,disables:"function"==typeof(_base1=sfDom.attr(d,"data-disables")).split?_base1.split(","):void 0,inview:sf.lib.lang.cbool(sfDom.attr(d,"data-inview")),refresh_time:sfDom.attr(d,"data-refresh-time"),refresh_oov:sf.lib.lang.cbool(sfDom.attr(d,"data-refresh-oov")),session:null!=session?session.serializeCookie():void 0,referrer:sfDom.attr(d,"data-referrer"),ignoreEvents:sf.lib.lang.cbool(sfDom.attr(d,"data-ignore-events"))}),Slot(adId)},Slot.slots=slots,Slot.sizes=sizes,Slot}(sf)}).call(this)},{"../shared/event":6,"../shared/sizes":8,"../shared/utils":10,safeframe:15}],3:[function(require,module){(function(){var uuid;uuid=require("node-uuid"),module.exports=function(){var Base;return Base=function(){function Base(){this.id=uuid.v4(),this.attributes||(this.attributes={}),this._events=[]}return Base.prototype.set=function(attrs,options){var changed,changedAttributes,f,k,v,_i,_len,_ref,_results;if(null==options&&(options={}),"object"!=typeof attrs)throw"attrs must be an object";changed=!1,changedAttributes=[];for(k in attrs)v=attrs[k],this.attributes[k]!==v&&changedAttributes.push(k),this.attributes[k]=v;if(!options.silent&&changedAttributes.length>0){for(_ref=this._events,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)f=_ref[_i],_results.push(f.apply(this,[this,changedAttributes]));return _results}},Base.prototype.change=function(f){var _i,_len,_ref,_results;if(f&&"function"==typeof f)return this._events.push(f);if(!f){for(_ref=this._events,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)f=_ref[_i],_results.push(f.apply(this,arguments));return _results}},Base}()}()}).call(this)},{"node-uuid":13}],4:[function(require,module){(function(){module.exports=function(){return{api:"//api.adjs.net/1",cdn_url:"//cdn.adjs.net/html/adjsframe.html",visit_expiry:30,version:"0.0.1",domain:"adjs.net",controller_url:"//cdn.adjs.net/html/controllerframe.html"}}()}).call(this)},{}],5:[function(require,module){(function(){var utils;utils=require("./utils"),module.exports=function(window,$sf){var ENGAGEMENT_RESET,activityHandler,attach,disengageEvents,doc,engageEvents,engagement,engagementTimeout,lastEngaged,resetEngagement;return attach=$sf.lib.dom.attach,engagement={isEngaged:!1},doc=window.document,engageEvents=[],disengageEvents=[],ENGAGEMENT_RESET=3e3,lastEngaged=void 0,engagement.onEngagement=function(f){return engageEvents.push(f)},engagement.onDisengagement=function(f){return disengageEvents.push(f)},activityHandler=function(){var f,_i,_len;for(engagement.isEngaged=!0,engagement.lastEngaged=utils.now(),_i=0,_len=engageEvents.length;_len>_i;_i++)(f=engageEvents[_i])();return resetEngagement(),!0},engagementTimeout=null,resetEngagement=function(){return clearTimeout(engagementTimeout),engagementTimeout=setTimeout(function(){var f,_i,_len;for(engagement.isEngaged=!1,_i=0,_len=disengageEvents.length;_len>_i;_i++)(f=disengageEvents[_i])();return disengageEvents=[]},ENGAGEMENT_RESET)},attach(doc,"click",activityHandler),attach(doc,"mouseup",activityHandler),attach(doc,"mousedown",activityHandler),attach(doc,"mousemove",activityHandler),attach(doc,"mousewheel",activityHandler),attach(doc,"keypress",activityHandler),attach(doc,"keydown",activityHandler),attach(doc,"keyup",activityHandler),attach(window,"DOMMouseScroll",activityHandler),attach(window,"scroll",activityHandler),attach(window,"resize",activityHandler),attach(window,"focus",activityHandler),attach(window,"blur",activityHandler),engagement}(window,$sf)}).call(this)},{"./utils":10}],6:[function(require,module){(function(){module.exports=function(eventNames){return function(){var event,events,_i,_len;for(events={on:function(event,cb){var eventList;return this.events||(this.events={}),eventList=this.events[event]||[],eventList.push(cb),this.events[event]=eventList,this},trigger:function(event,data,optionalData){var e,ex,_i,_len,_ref;for(this.events||(this.events={}),_ref=this.events[event]||[],_i=0,_len=_ref.length;_len>_i;_i++){e=_ref[_i];try{e.call(this,data,optionalData)}catch(_error){ex=_error}}return this}},_i=0,_len=eventNames.length;_len>_i;_i++)event=eventNames[_i],events[event]=function(event){var f;return f=function(data){return"function"==typeof data?this.on(event,data):this.trigger(event,data)}}(event);return events}()}}).call(this)},{}],7:[function(require,module){(function(){var Base,config,cookies,utils,uuid,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};cookies=require("cookies-js"),uuid=require("node-uuid"),Base=require("./base"),utils=require("./utils"),config=require("./config"),module.exports=function(){var COOKIE_KEY,Session,defaultAttributes,getUserId,now,parseCookie,persistentFields,updateVisitId;return COOKIE_KEY="_ajsk",now=utils.now(),updateVisitId=function(options){var nowTime;return nowTime=utils.now()/1e3,this.lastVisitTime||(this.lastVisitTime=utils.toNumber(this.attributes.vts,0)),nowTime-Session.VISITOR_EXPIRY>this.lastVisitTime?this.set({v:utils.toNumber(this.attributes.v)+1,vts0:this.attributes.vts,vts:nowTime,vid:uuid.v4(),vp:0,va:0,vav:0,vae:0,vac:0},options):(this.lastVisitTime=nowTime,this.set({vts:nowTime},{silent:!0}))},parseCookie=function(cookie){return utils.fromQuery(cookie)},getUserId=function(){return utils.sendRequest()},defaultAttributes=function(){return{id:uuid.v4(),vid:uuid.v4(),ts:now/1e3,p:0,a:0,av:0,ac:0,ae:0,v:1,vts:now/1e3,vts0:now/1e3,vp:0,va:0,vav:0,vae:0,vac:0}},persistentFields=function(){return defaultAttributes()},Session=function(_super){function Session(query){var attrs,cookie,k,v,_base,_ref;Session.__super__.constructor.call(this),_ref=defaultAttributes();for(k in _ref)v=_ref[k],(_base=this.attributes)[k]||(_base[k]=v);query?(attrs=parseCookie(query),this.set(attrs,{silent:!0})):(cookie=cookies.get(COOKIE_KEY))?(attrs=parseCookie(cookie),this.set(attrs,{silent:!0}),updateVisitId.call(this,{silent:!0}),this.serializeCookie()):this.serializeCookie()}return __extends(Session,_super),Session.prototype.serializeCookie=function(){var query;return query=utils.toQuery(this.attributes),cookies.set(COOKIE_KEY,query,{expires:31536e3}),query},Session.prototype.set=function(attrs,options){return null==options&&(options={}),Session.__super__.set.call(this,attrs,options),this.serializeCookie()},Session.prototype.incr=function(key,options){var updatedVals,vkey,_base;return(_base=this.attributes)[key]||(_base[key]=0),updatedVals={},updatedVals[key]=utils.toNumber(this.attributes[key])+1,vkey="v"+key,null!=this.attributes[vkey]&&(updatedVals[vkey]=utils.toNumber(this.attributes[vkey])+1),this.set(updatedVals,options)},Session.prototype.path="/page",Session}(Base),Session.VISITOR_EXPIRY=config.visit_expiry,"undefined"!=typeof _TEST&&null!==_TEST&&_TEST&&(Session._updateVisitId=updateVisitId,Session._parseCookie=parseCookie,Session._getUser=getUserId,Session._COOKIE_KEY=COOKIE_KEY,Session.clearCookie=function(){return cookies.set(COOKIE_KEY,void 0)}),Session}()}).call(this)},{"./base":3,"./config":4,"./utils":10,"cookies-js":11,"node-uuid":13}],8:[function(require,module){(function(){module.exports=function(){return{leaderboard:[728,90],"medium-rectangle":[300,250]}}()}).call(this)},{}],9:[function(require,module){(function(){var config,reqwest;reqwest=require("reqwest"),config=require("./config"),module.exports=function(){var mapping,pendingRequests,prefix,send,sendingRequests;return prefix=config.api,pendingRequests={},sendingRequests={},mapping={id:"user_id",p:"site_page_vw",a:"site_ad_req",av:"site_ad_vw",ac:"site_ad_clk",ae:"site_ad_vw_eng",v:"site_vis",vp:"vis_page_vw",va:"vis_ad_req",vav:"vis_ad_vw",vae:"vis_ad_vw_eng",vac:"vis_ad_clk"},send=function(url,data,success,error){return reqwest({url:url,type:"jsonp",data:data,success:success,error:error})},{page:function(session){var error,success;return success=function(resp){return session.set(resp)},error=function(err){return console.log("ERROR:"+err)},send(prefix+"/page",session.attributes,success,error)},event:function(request,cb,isAttempt){var error,k,params,success,v,_ref;if(success=function(resp){return request.set(resp,{silent:!0}),"function"==typeof cb&&cb(resp),delete sendingRequests[request.id]},error=function(err){return console.log("ERROR:"+err)},!sendingRequests[request.id]){delete pendingRequests[request.id],sendingRequests[request.id]=!0,params={},_ref=request.attributes;for(k in _ref)v=_ref[k],params[mapping[k]||k]=v;return send(prefix+"/event",params,success,error)}return!pendingRequests[request.id]||isAttempt?(pendingRequests[request.id],setTimeout(function(_this){return function(){return _this.event(request,cb,!0)}}(this),500)):void 0}}}()}).call(this)},{"./config":4,reqwest:14}],10:[function(require,module){(function(){var reqwest;window.JSON||(window.JSON=require("json")),reqwest=require("reqwest"),window.JSON||(window.JSON=require("json")),module.exports=function($sf){var capitalizeString,countFrames,defineProperty,fromQuery,getFramePosition,keys,nativeReduce,now,reduce,reduceError,sendRequest,toNumber,toQuery;return sendRequest=function(options){return reqwest(options)},fromQuery=function(query,delim){var item,key,params,value,_i,_len,_ref,_ref1;for(null==query&&(query=""),null==delim&&(delim="&"),params={},_ref=query.split(delim),_i=0,_len=_ref.length;_len>_i;_i++)item=_ref[_i],_ref1=item.split("="),key=_ref1[0],value=_ref1[1],params[key]=decodeURIComponent(value);return params},toQuery=function(attributes){return reqwest.toQueryString(attributes)},toNumber=function(val){return null!=$sf?$sf.lib.lang.cnum(val,0):void 0},now=function(){return(new Date).getTime()},defineProperty=function(obj,prop,descriptor){var e;try{if("defineProperty"in Object)return Object.defineProperty(obj,prop,descriptor);if("__defineGetter__"in obj){if(descriptor.value){if(obj.__defineGetter__(prop,function(){return descriptor.value}),descriptor.writable!==!1)return obj.__defineSetter__(prop,function(val){return val[prop]=val})}else if(null!=descriptor.get&&obj.__defineGetter__(prop,descriptor.get),null!=descriptor.set)return obj.__defineSetter__(prop,descriptor.set)}else if(descriptor.value)return obj[prop]=descriptor.value}catch(_error){e=_error}},countFrames=function(win){var count,frame,_i,_len,_ref;for(count=win.frames.length,_ref=win.frames,_i=0,_len=_ref.length;_len>_i;_i++)frame=_ref[_i],frame!==win&&(count+=countFrames(frame));return count},getFramePosition=function(win){var count;return count=0,win.parent!==win.top&&(count=1+getFramePosition(win.parent)),count},nativeReduce=Array.prototype.reduce,reduceError="Reduce of empty array with no initial value",reduce=function(obj,iterator,memo,context){var index,initial,value,_fn,_i,_len;if(initial=arguments.length>2,null==obj&&(obj=[]),nativeReduce&&obj.reduce===nativeReduce)return context&&(iterator=_.bind(iterator,context)),initial?obj.reduce(iterator,memo):obj.reduce(iterator);for(_fn=function(value,index,obj){initial?memo=iterator.call(context,memo,value,index,obj):(memo=value,initial=!0)},index=_i=0,_len=obj.length;_len>_i;index=++_i)value=obj[index],_fn(value,index,obj);if(!initial)throw new TypeError(reduceError);return memo},keys=function(obj){return null!=$sf?$sf.lib.lang.keys(obj):void 0},capitalizeString=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},{sendRequest:sendRequest,toQuery:toQuery,fromQuery:fromQuery,toNumber:toNumber,now:now,defineProperty:defineProperty,countFrames:countFrames,capitalizeString:capitalizeString,keys:keys,getFramePosition:getFramePosition,reduce:reduce}}($sf)}).call(this)},{json:12,reqwest:14}],11:[function(require,module,exports){!function(undefined){"use strict";var Cookies=function(key,value,options){return 1===arguments.length?Cookies.get(key):Cookies.set(key,value,options)};Cookies._document=document,Cookies._navigator=navigator,Cookies.defaults={path:"/"},Cookies.get=function(key){return Cookies._cachedDocumentCookie!==Cookies._document.cookie&&Cookies._renewCache(),Cookies._cache[key]},Cookies.set=function(key,value,options){return options=Cookies._getExtendedOptions(options),options.expires=Cookies._getExpiresDate(value===undefined?-1:options.expires),Cookies._document.cookie=Cookies._generateCookieString(key,value,options),Cookies},Cookies.expire=function(key,options){return Cookies.set(key,undefined,options)},Cookies._getExtendedOptions=function(options){return{path:options&&options.path||Cookies.defaults.path,domain:options&&options.domain||Cookies.defaults.domain,expires:options&&options.expires||Cookies.defaults.expires,secure:options&&options.secure!==undefined?options.secure:Cookies.defaults.secure}},Cookies._isValidDate=function(date){return"[object Date]"===Object.prototype.toString.call(date)&&!isNaN(date.getTime())},Cookies._getExpiresDate=function(expires,now){switch(now=now||new Date,typeof expires){case"number":expires=new Date(now.getTime()+1e3*expires);break;case"string":expires=new Date(expires)}if(expires&&!Cookies._isValidDate(expires))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return expires},Cookies._generateCookieString=function(key,value,options){key=encodeURIComponent(key),value=(value+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),options=options||{};var cookieString=key+"="+value;return cookieString+=options.path?";path="+options.path:"",cookieString+=options.domain?";domain="+options.domain:"",cookieString+=options.expires?";expires="+options.expires.toGMTString():"",cookieString+=options.secure?";secure":""},Cookies._getCookieObjectFromString=function(documentCookie){for(var cookieObject={},cookiesArray=documentCookie?documentCookie.split("; "):[],i=0;i<cookiesArray.length;i++){var cookieKvp=Cookies._getKeyValuePairFromCookieString(cookiesArray[i]);cookieObject[cookieKvp.key]===undefined&&(cookieObject[cookieKvp.key]=cookieKvp.value)}return cookieObject},Cookies._getKeyValuePairFromCookieString=function(cookieString){var separatorIndex=cookieString.indexOf("=");return separatorIndex=0>separatorIndex?cookieString.length:separatorIndex,{key:decodeURIComponent(cookieString.substr(0,separatorIndex)),value:decodeURIComponent(cookieString.substr(separatorIndex+1))}},Cookies._renewCache=function(){Cookies._cache=Cookies._getCookieObjectFromString(Cookies._document.cookie),Cookies._cachedDocumentCookie=Cookies._document.cookie},Cookies._areEnabled=function(){return Cookies._navigator.cookieEnabled||"1"===Cookies.set("cookies.js",1).get("cookies.js")},Cookies.enabled=Cookies._areEnabled(),"function"==typeof define&&define.amd?define(function(){return Cookies}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Cookies),exports.Cookies=Cookies):window.Cookies=Cookies}()},{}],12:[function(require,module,exports){var JSON;JSON||(JSON={}),function(){"use strict";function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,partial,mind=gap,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;length>i;i+=1)"string"==typeof rep[i]&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v));return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}var global=Function("return this")(),JSON=global.JSON;JSON||(JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else"string"==typeof space&&(indent=space);if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),global.JSON=JSON,module.exports=JSON}()},{}],13:[function(require,module){(function(Buffer){(function(){function parse(s,buf,offset){var i=buf&&offset||0,ii=0;for(buf=buf||[],s.toLowerCase().replace(/[0-9a-f]{2}/g,function(oct){16>ii&&(buf[i+ii++]=_hexToByte[oct])});16>ii;)buf[i+ii++]=0;return buf}function unparse(buf,offset){var i=offset||0,bth=_byteToHex;return bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+"-"+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]+bth[buf[i++]]}function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[];options=options||{};var clockseq=null!=options.clockseq?options.clockseq:_clockseq,msecs=null!=options.msecs?options.msecs:(new Date).getTime(),nsecs=null!=options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(0>dt&&null==options.clockseq&&(clockseq=clockseq+1&16383),(0>dt||msecs>_lastMSecs)&&null==options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq,msecs+=122192928e5;var tl=(1e4*(268435455&msecs)+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;6>n;n++)b[i+n]=node[n];return buf?buf:unparse(b)}function v4(options,buf,offset){var i=buf&&offset||0;"string"==typeof options&&(buf="binary"==options?new BufferClass(16):null,options=null),options=options||{};var rnds=options.random||(options.rng||_rng)();if(rnds[6]=15&rnds[6]|64,rnds[8]=63&rnds[8]|128,buf)for(var ii=0;16>ii;ii++)buf[i+ii]=rnds[ii];return buf||unparse(rnds)}var _rng,_global=this;if("function"==typeof require)try{var _rb=require("crypto").randomBytes;_rng=_rb&&function(){return _rb(16)}}catch(e){}if(!_rng&&_global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);_rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!_rng){var _rnds=new Array(16);_rng=function(){for(var r,i=0;16>i;i++)0===(3&i)&&(r=4294967296*Math.random()),_rnds[i]=r>>>((3&i)<<3)&255;return _rnds}}for(var BufferClass="function"==typeof Buffer?Buffer:Array,_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;if(uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,uuid.BufferClass=BufferClass,"function"==typeof define&&define.amd)define(function(){return uuid});else if("undefined"!=typeof module&&module.exports)module.exports=uuid;else{var _previousRoot=_global.uuid;uuid.noConflict=function(){return _global.uuid=_previousRoot,uuid},_global.uuid=uuid}}).call(this)}).call(this,require("buffer").Buffer)},{buffer:23,crypto:27}],14:[function(require,module,exports){!function(name,context,definition){"undefined"!=typeof module&&module.exports?module.exports=definition():"function"==typeof define&&define.amd?define(definition):context[name]=definition()}("reqwest",this,function(){function handleReadyState(r,success,error){return function(){return r._aborted?error(r.request):void(r.request&&4==r.request[readyState]&&(r.request.onreadystatechange=noop,twoHundo.test(r.request.status)?success(r.request):error(r.request)))
}}function setHeaders(http,o){var h,headers=o.headers||{};headers.Accept=headers.Accept||defaultHeaders.accept[o.type]||defaultHeaders.accept["*"],o.crossOrigin||headers[requestedWith]||(headers[requestedWith]=defaultHeaders.requestedWith),headers[contentType]||(headers[contentType]=o.contentType||defaultHeaders.contentType);for(h in headers)headers.hasOwnProperty(h)&&"setRequestHeader"in http&&http.setRequestHeader(h,headers[h])}function setCredentials(http,o){"undefined"!=typeof o.withCredentials&&"undefined"!=typeof http.withCredentials&&(http.withCredentials=!!o.withCredentials)}function generalCallback(data){lastValue=data}function urlappend(url,s){return url+(/\?/.test(url)?"&":"?")+s}function handleJsonp(o,fn,err,url){var reqId=uniqid++,cbkey=o.jsonpCallback||"callback",cbval=o.jsonpCallbackName||reqwest.getcallbackPrefix(reqId),cbreg=new RegExp("((^|\\?|&)"+cbkey+")=([^&]+)"),match=url.match(cbreg),script=doc.createElement("script"),loaded=0,isIE10=-1!==navigator.userAgent.indexOf("MSIE 10.0");return match?"?"===match[3]?url=url.replace(cbreg,"$1="+cbval):cbval=match[3]:url=urlappend(url,cbkey+"="+cbval),win[cbval]=generalCallback,script.type="text/javascript",script.src=url,script.async=!0,"undefined"==typeof script.onreadystatechange||isIE10||(script.htmlFor=script.id="_reqwest_"+reqId),script.onload=script.onreadystatechange=function(){return script[readyState]&&"complete"!==script[readyState]&&"loaded"!==script[readyState]||loaded?!1:(script.onload=script.onreadystatechange=null,script.onclick&&script.onclick(),fn(lastValue),lastValue=void 0,head.removeChild(script),void(loaded=1))},head.appendChild(script),{abort:function(){script.onload=script.onreadystatechange=null,err({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(script),loaded=1}}}function getRequest(fn,err){var http,o=this.o,method=(o.method||"GET").toUpperCase(),url="string"==typeof o?o:o.url,data=o.processData!==!1&&o.data&&"string"!=typeof o.data?reqwest.toQueryString(o.data):o.data||null,sendWait=!1;return"jsonp"!=o.type&&"GET"!=method||!data||(url=urlappend(url,data),data=null),"jsonp"==o.type?handleJsonp(o,fn,err,url):(http=o.xhr&&o.xhr(o)||xhr(o),http.open(method,url,o.async===!1?!1:!0),setHeaders(http,o),setCredentials(http,o),win[xDomainRequest]&&http instanceof win[xDomainRequest]?(http.onload=fn,http.onerror=err,http.onprogress=function(){},sendWait=!0):http.onreadystatechange=handleReadyState(this,fn,err),o.before&&o.before(http),sendWait?setTimeout(function(){http.send(data)},200):http.send(data),http)}function Reqwest(o,fn){this.o=o,this.fn=fn,init.apply(this,arguments)}function setType(header){return header.match("json")?"json":header.match("javascript")?"js":header.match("text")?"html":header.match("xml")?"xml":void 0}function init(o,fn){function complete(resp){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(resp)}function success(resp){var type=o.type||setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(resp,msg,t){for(resp=self.request,self._responseArgs.resp=resp,self._responseArgs.msg=msg,self._responseArgs.t=t,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(resp,msg,t);complete(resp)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(o,fn){return new Reqwest(o,fn)}function normalize(s){return s?s.replace(/\r?\n/g,"\r\n"):""}function serial(el,cb){var ch,ra,val,i,n=el.name,t=el.tagName.toLowerCase(),optCb=function(o){o&&!o.disabled&&cb(n,normalize(o.attributes.value&&o.attributes.value.specified?o.value:o.text))};if(!el.disabled&&n)switch(t){case"input":/reset|button|image|file/i.test(el.type)||(ch=/checkbox/i.test(el.type),ra=/radio/i.test(el.type),val=el.value,(!(ch||ra)||el.checked)&&cb(n,normalize(ch&&""===val?"on":val)));break;case"textarea":cb(n,normalize(el.value));break;case"select":if("select-one"===el.type.toLowerCase())optCb(el.selectedIndex>=0?el.options[el.selectedIndex]:null);else for(i=0;el.length&&i<el.length;i++)el.options[i].selected&&optCb(el.options[i])}}function eachFormElement(){var e,i,cb=this,serializeSubtags=function(e,tags){var i,j,fa;for(i=0;i<tags.length;i++)for(fa=e[byTag](tags[i]),j=0;j<fa.length;j++)serial(fa[j],cb)};for(i=0;i<arguments.length;i++)e=arguments[i],/input|select|textarea/i.test(e.tagName)&&serial(e,cb),serializeSubtags(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var hash={};return eachFormElement.apply(function(name,value){name in hash?(hash[name]&&!isArray(hash[name])&&(hash[name]=[hash[name]]),hash[name].push(value)):hash[name]=value},arguments),hash}function buildParams(prefix,obj,traditional,add){var name,i,v,rbracket=/\[\]$/;if(isArray(obj))for(i=0;obj&&i<obj.length;i++)v=obj[i],traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add);else if(obj&&"[object Object]"===obj.toString())for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(o){if(o.crossOrigin===!0){var xhr=win[xmlHttpRequest]?new XMLHttpRequest:null;if(xhr&&"withCredentials"in xhr)return xhr;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(data){return data}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(success,fail){return success=success||function(){},fail=fail||function(){},this._fulfilled?this._responseArgs.resp=success(this._responseArgs.resp):this._erred?fail(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(success),this._errorHandlers.push(fail)),this},always:function(fn){return this._fulfilled||this._erred?fn(this._responseArgs.resp):this._completeHandlers.push(fn),this},fail:function(fn){return this._erred?fn(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(fn),this}},reqwest.serializeArray=function(){var arr=[];return eachFormElement.apply(function(name,value){arr.push({name:name,value:value})},arguments),arr},reqwest.serialize=function(){if(0===arguments.length)return"";var opt,fn,args=Array.prototype.slice.call(arguments,0);return opt=args.pop(),opt&&opt.nodeType&&args.push(opt)&&(opt=null),opt&&(opt=opt.type),fn="map"==opt?serializeHash:"array"==opt?reqwest.serializeArray:serializeQueryString,fn.apply(null,args)},reqwest.toQueryString=function(o,trad){var prefix,i,traditional=trad||!1,s=[],enc=encodeURIComponent,add=function(key,value){value="function"==typeof value?value():null==value?"":value,s[s.length]=enc(key)+"="+enc(value)};if(isArray(o))for(i=0;o&&i<o.length;i++)add(o[i].name,o[i].value);else for(prefix in o)o.hasOwnProperty(prefix)&&buildParams(prefix,o[prefix],traditional,add);return s.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(o,fn){return o&&(o.type&&(o.method=o.type)&&delete o.type,o.dataType&&(o.type=o.dataType),o.jsonpCallback&&(o.jsonpCallbackName=o.jsonpCallback)&&delete o.jsonpCallback,o.jsonp&&(o.jsonpCallback=o.jsonp)),new Reqwest(o,fn)},reqwest.ajaxSetup=function(options){options=options||{};for(var k in options)globalSetupOptions[k]=options[k]},reqwest})},{}],15:[function(require,module){(function(){var sf;sf=require("./host/host"),function(window,sf){return window.$sf=sf}(window,sf),module.exports=sf}).call(this)},{"./host/host":17}],16:[function(require,module){(function(){var sf;sf=require("../shared/base"),module.exports=function(window,sf){var AUTO_BOOT_MAX_RETRIES,SF_DATATAG_CLASS,SF_POSELEM_WRAPPER_CLASS,SF_TAG_TYPE,boot,boot_retries,d,doing_auto_boot,dom,has_booted,inline_tags_processed,lang,lib,win,_attr,_auto_boot,_clean_up_booted_tags,_create_pos_markup,_cstr,_elt,_guid,_log,_par,_purge,_ready,_tags;return win=null!=window?window:this,_log=function(msg,is_err){var err_tag,head_el,lib;try{lib=sf.lib,lib&&lib.logger&&win===top?is_err?lib.logger.error(msg):lib.logger.log(msg):(head_el=d.getElementsByTagName("head")[0],err_tag=d.createElement("script"),err_tag.type="text/plain",err_tag.text="<!-- SafeFrame "+(is_err?"error":"log")+": "+(msg||"unknown")+" -->",head_el.appendChild(head_el,err_tag))}catch(_error){}},_create_pos_markup=function(src){return _cstr(["<scr","ipt type='text/javascript', src='",src,"'></scr","ipt>"])},_auto_boot=function(){var config,do_auto,doing_auto_boot,e,head,host_file,scr_tag,sf_host;if(do_auto=!0,config=void 0,sf_host=void 0,host_file=void 0,head=void 0,scr_tag=void 0,!has_booted)if(sf_host=sf&&sf.host,win===top){sf_host&&!sf_host.boot&&(sf_host.boot=boot);try{config=sf_host&&sf_host.Config()}catch(_error){e=_error,config=null}if(!config)try{config=sf_host&&sf_host.conf}catch(_error){e=_error,config=null}if(config&&("auto"in config&&config.auto===!1&&(do_auto=!1),(!sf_host.render||!sf_host.Config)&&(host_file=config.hostFile)))return head=_tags("head")[0],scr_tag=dom.make("script"),scr_tag.id="sf_host_lib",scr_tag.type="text/javascript",scr_tag.className="sf_lib",scr_tag.src=host_file,win.ActiveXObject?scr_tag.onreadystatechange=function(){var doing_auto_boot,rs;rs=scr_tag.readyState,("loaded"===rs||"complete"===rs)&&(doing_auto_boot=!1,do_auto&&boot(),scr_tag.onreadystatechange=null,scr_tag=head=sf_host=config=null)}:scr_tag.onload=function(){var doing_auto_boot;doing_auto_boot=!1,do_auto&&boot(),scr_tag.onload=null,scr_tag=head=sf_host=config=null},doing_auto_boot=!0,void head.appendChild(scr_tag);do_auto&&(config?(doing_auto_boot=!0,boot(),doing_auto_boot=!1):boot_retries++<=AUTO_BOOT_MAX_RETRIES&&setTimeout(_auto_boot,50))}else boot()},_clean_up_booted_tags=function(){var script_tag,script_tag_id;if(script_tag_id=void 0,script_tag=void 0,dom)for(script_tag_id in inline_tags_processed)script_tag=_elt(script_tag_id),script_tag&&(_purge(script_tag),delete inline_tags_processed[script_tag_id])},boot=function(){var boot_positions,data,e,err,errMsg,has_booted,html,idx,lib,meta_key,pos_conf,pos_dest_el,pos_meta,pos_meta_item,pos_obj,prv_meta,prv_meta_key,ret,script_tag,script_tag_id,script_tag_par,script_tags,sf_conf,sf_host,sf_inline_conf,sf_ocnf,shared_meta,typ;if(script_tags=_tags&&_tags("script")||[],boot_positions=[],idx=0,ret=!1,errMsg=void 0,sf_host=sf&&sf.host,sf_inline_conf=sf_host&&sf_host.conf,script_tag=void 0,script_tag_par=void 0,script_tag_id=void 0,data=void 0,html=void 0,pos_obj=void 0,pos_conf=void 0,pos_dest_el=void 0,pos_meta=void 0,pos_meta_item=void 0,typ=void 0,shared_meta=void 0,prv_meta=void 0,prv_meta_key=void 0,meta_key=void 0,sf_ocnf=void 0,err=void 0,!sf||!lang||!dom)return _log("SafeFrame base library not found",!0),ret;if(lib||(lib=sf&&sf.lib),doing_auto_boot&&has_booted)return _log("Automatic boot already invoked"),ret;if(win===top){try{sf_conf=sf_host.Config()}catch(_error){err=_error,sf_conf=null}if(sf_inline_conf&&!sf_conf)try{sf_conf=sf_host.Config(sf_inline_conf)}catch(_error){e=_error,sf_conf=null}if(!sf_conf)return _log("No configuration found"),ret}for(;script_tag=script_tags[idx++];)if(script_tag.className===SF_DATATAG_CLASS||_attr(script_tag,"type")===SF_TAG_TYPE){if(has_booted=!0,script_tag_id=_attr(script_tag,"id"),script_tag_id||(script_tag_id=_guid("sf_data_element"),_attr(script_tag,"id",script_tag_id)),inline_tags_processed[script_tag_id])continue;data=script_tag.text||script_tag.innerHTML||script_tag.innerText;try{data=lang.trim(data),data=new Function("return "+data),data=data()}catch(_error){err=_error,data=null,errMsg="Error parsing tag configuration "+(err&&err.message||""),_log(errMsg,!0);continue}if(data&&data.id&&(data.html||data.src))if(win!==top)html=data.html||"",html=html||_create_pos_markup(data.src),_ready()?_log("cannot write html content into already loaded document"):d.write(html);else{if(script_tag_par=_par(script_tag),!script_tag_par){_log("can't find parent element for script tag",!0);continue}if(pos_conf=sf_conf&&sf_conf.positions[data.id],pos_conf||(pos_conf=data.conf,pos_conf.id=data.id,pos_conf&&(pos_conf=new sf_host.PosConfig(pos_conf))),!pos_conf){_log("no position conf found pre-defined or inline for position "+data.id,!0);continue}if(pos_conf.dest||(pos_conf=new sf_host.PosConfig(pos_conf,_guid(SF_POSELEM_WRAPPER_CLASS))),data.meta){pos_meta=data.meta,meta_key="",shared_meta={};for(meta_key in pos_meta)pos_meta_item=pos_meta[meta_key],typ=typeof pos_meta_item,!prv_meta&&"object"===typ&&pos_meta_item&&(prv_meta=pos_meta_item,prv_meta_key=meta_key),"object"!==typ&&"function"!==typ&&(shared_meta[meta_key]=pos_meta_item);pos_meta=new sf_host.PosMeta(shared_meta,prv_meta_key||"",prv_meta_key&&prv_meta?prv_meta:null)}if(pos_obj=new sf_host.Position(data,null,pos_meta,pos_conf),inline_tags_processed[script_tag_id]=script_tag_id,pos_dest_el=_elt(pos_conf.dest),!pos_dest_el)if(_ready()){pos_dest_el=dom.make("div"),_attr(pos_dest_el,"id",pos_conf.dest);try{script_tag_par.insertBefore(pos_dest_el)}catch(_error){err=_error,_log("failed auto-adding destination element "+err.message,!0);continue}}else d.write("<div id='",pos_conf.dest,"'></div>");boot_positions.push(pos_obj)}else _log("no content or id property found in the inline position object",!0)}if(boot_positions.length)try{sf_host.render(boot_positions)}catch(_error){e=_error,_log("failed during rendering "+e.message)}else _log("no positions to boot");dom.wait(_clean_up_booted_tags)},SF_DATATAG_CLASS="sf_data",SF_TAG_TYPE="text/x-safeframe",AUTO_BOOT_MAX_RETRIES=100,SF_POSELEM_WRAPPER_CLASS="sf_position",d=win&&win.document,lib=sf.lib,lang=lib.lang,dom=lib.dom,_cstr=lang.cstr,_guid=lang.guid,_elt=dom.elt,_par=dom.par,_tags=dom.tags,_attr=dom.attr,_purge=dom.purge,_ready=dom.ready,inline_tags_processed={},boot_retries=0,has_booted=!1,doing_auto_boot=!1,setTimeout(_auto_boot,50),sf}(window,sf)}).call(this)},{"../shared/base":18}],17:[function(require,module){(function(){var sf;sf=require("./boot"),module.exports=function(window,sf){var ATTACH,AUTO,AUTO_BOOT_MAX_RETRIES,BF_POS_MSG,CLIP,COLLAPSE_COMMAND,COMPARE_DOC_POS,COMPAT_MODE,CONTAINS,Config,DEFAULT_RENDER_TIMEOUT,DEFAULT_ZINDEX,DETACH,DOC,DOC_EL,EL_FROM_PT,ERROR_COMMAND,EXPAND_COMMAND,FLASH_MIME,GEOM_UPDATE_INTRVAL,GUID,HEIGHT,HIDDEN,IE_BORDER_ADJ,INTERSECT_FACTOR,LEN,M,MSG,NODE_TYPE,NOTIFY_COLLAPSE,NOTIFY_EXPAND,NOTIFY_FOCUS_CHANGE,NOTIFY_GEOM_UPDATE,OBJ,ONSCROLL,OVER,PMSG,POS_ID_AUTO_PREFIX,POS_MSG,POS_REL_BOX_ID_PREFIX,PX,ParamHash,PosConfig,PosMeta,Position,SCROLL,SF_DATATAG_CLASS,SF_POSELEM_WRAPPER_CLASS,ST,STR,SUPPORTS_FEATURES,TFXD,VERSION,WIDTH,XCOM_RESP_DELAY,attach_iframe_msging,bounds,canUseHTML5,complete_ifrs,config,contains,currentStyle,current_status,dc,detach_iframe_msging,docRect,dom,env,flashActiveXVersions,flash_ver,focus_update_timer,geckVer,geom_update_timer,get,html5Bound,ieVer,ifr_dest_id_map,iframes,inViewPercentage,initID,isIE,lang,lib,loc,locHost,mgr_bounds_details,msg_pipes,msghostfb,nuke,operaVer,overlaps,pending_ifrs,prep_iframe_msging,render,rendered_ifrs,scroll_parents_attached,send_msg_to_child_iframe,status,ua,usingHTML5,wbVer,win,winRect,win_events_attached,_attr,_build_geom,_calcBorders,_call_xmsg_host_fb,_callable,_cbool,_check_html5_init,_clear_focus_update_timer,_clear_geom_update_timer,_cnum,_collapse_safeframe,_cookieHash,_cookies_enabled_test,_create_pos_markup,_cstr,_doc,_docNode,_elt,_es,_expand_safeframe,_fire_pub_callback,_getClip,_getGeom,_getRectIE,_getRectNonIE,_get_doc_scroll,_get_flash_version,_guid,_handle_frame_load,_handle_msg_evt,_handle_msg_from_outside,_handle_node_scroll,_handle_render_timeout,_handle_unload,_handle_win_blur,_handle_win_focus,_handle_win_geom_resize,_handle_win_geom_scroll,_has_pending_renders,_ifr_view,_isPX,_max,_min,_mix,_noop,_par,_purge,_read_cookie,_ready,_record_error,_rect,_round,_send_generic_response,_send_response,_set_focus_update_timer,_set_geom_update_timer,_shim_frame,_strippedEncodedLocation,_tagName,_tags,_update_focus,_update_geom,_update_geom_win_resize,_update_geom_win_scroll,_view,_write_cookie;return win=window,DEFAULT_RENDER_TIMEOUT=6e4,POS_ID_AUTO_PREFIX="sf_pos",POS_REL_BOX_ID_PREFIX="sf_pos_rel_el",SF_DATATAG_CLASS="sf_data",SF_POSELEM_WRAPPER_CLASS="sf_position",AUTO_BOOT_MAX_RETRIES=100,GEOM_UPDATE_INTRVAL=100,XCOM_RESP_DELAY=1,IE_BORDER_ADJ=2,INTERSECT_FACTOR=10,BF_POS_MSG="onBeforePosMsg",POS_MSG="onPosMsg",SUPPORTS_FEATURES={"exp-ovr":1,"exp-push":0,bg:0,pin:0,"read-cookie":0,"write-cookie":0},EXPAND_COMMAND="exp-ovr",COLLAPSE_COMMAND="collapse",ERROR_COMMAND="error",NOTIFY_EXPAND="expand",NOTIFY_GEOM_UPDATE="geom-update",NOTIFY_COLLAPSE=COLLAPSE_COMMAND,NOTIFY_FOCUS_CHANGE="focus-change",DEFAULT_ZINDEX=3e3,OBJ="object",STR="string",ST="style",LEN="length",WIDTH="width",HEIGHT="height",PX="PX",CLIP="clip",SCROLL="scroll",ONSCROLL="onscroll",COMPAT_MODE="compatMode",DOC_EL="documentElement",DOC="document",NODE_TYPE="nodeType",CONTAINS="contains",COMPARE_DOC_POS="compareDocumentPosition",EL_FROM_PT="elementFromPoint",AUTO="auto",HIDDEN="hidden",OVER="overflow",TFXD="toFixed",ATTACH="attach",DETACH="detach",MSG="message",PMSG="postMessage",GUID="guid",FLASH_MIME="application/x-shockwave-flash",VERSION=sf.ver,env=sf.env,ua=env.ua,lib=sf.lib,lang=lib.lang,dom=lib.dom,iframes=dom.iframes,_cbool=lang.cbool,_cnum=lang.cnum,_cstr=lang.cstr,_callable=lang.callable,_noop=lang.noop,_guid=lang[GUID],_mix=lang.mix,_elt=dom.elt,_par=dom.par,_tags=dom.tags,_attr=dom.attr,_doc=dom.doc,_tagName=dom.tagName,_view=dom.view,_ifr_view=iframes.view,_purge=dom.purge,_ready=dom.ready,_es=win&&win.escape,M=win&&win.Math,_max=M.max,_min=M.min,_round=M.round,_rect=null,ParamHash=lang&&lang.ParamHash,dc=win&&win[DOC],isIE=env&&env.isIE,ieVer=ua&&ua.ie||0,wbVer=ua&&ua.webkit||0,geckVer=ua&&ua.gecko||0,operaVer=ua&&ua.opera||0,loc=win.location,locHost=loc&&(loc.protocol+"//"+(loc.host||loc.hostname)||""),rendered_ifrs={},msg_pipes={},ifr_dest_id_map={},pending_ifrs={},complete_ifrs={},scroll_parents_attached={},mgr_bounds_details=!1,canUseHTML5=!1,html5Bound=!1,win_events_attached=!1,geom_update_timer=0,focus_update_timer=0,current_status=null,msghostfb=null,flash_ver=null,config=null,flashActiveXVersions=["ShockwaveFlash.ShockwaveFlash.11","ShockwaveFlash.ShockwaveFlash.8","ShockwaveFlash.ShockwaveFlash.7","ShockwaveFlash.ShockwaveFlash.6","ShockwaveFlash.ShockwaveFlash"],initID=void 0,Config=function(conf){var boot_up,conf_pos_map,me,posID,pos_conf,pos_id,pos_map;if(me=this,!arguments.length)return config?_mix({},config):null;if(!(me instanceof Config))return new Config(conf);if(!conf)return config=null,null;if(boot_up=!!config,me.auto="auto"in conf?_cbool(conf.auto):!0,me.cdn=_cstr(conf.cdn),me.debug=_cbool(conf.debug),me.root=_cstr(conf.root),me.renderFile=_cstr(conf.renderFile),me.msgFile=_cstr(conf.msgFile),me.to=_cnum(conf.to,DEFAULT_RENDER_TIMEOUT),me.ver=_cstr(conf.ver)||VERSION,me.onBeforePosMsg=_callable(conf.onBeforePosMsg)?conf.onBeforePosMsg:_noop,me.onPosMsg=_callable(conf.onPosMsg)?conf.onPosMsg:_noop,me.onStartPosRender=_callable(conf.onStartPosRender)?conf.onStartPosRender:_noop,me.onEndPosRender=_callable(conf.onEndPosRender)?conf.onEndPosRender:_noop,me.onFailure=_callable(conf.onFailure)?conf.onFailure:_noop,me.onAdLoad=_callable(conf.onAdLoad)?conf.onAdLoad:_noop,me.onReadCookie=_callable(conf.onReadCookie)?conf.onReadCookie:_noop,me.onWriteCookie=_callable(conf.onWriteCookie)?conf.onWriteCookie:_noop,conf_pos_map=conf.positions,me.positions=pos_map={},conf_pos_map)for(posID in conf_pos_map)pos_conf=conf_pos_map[posID],pos_conf&&typeof pos_conf===OBJ&&(pos_id=posID||pos_conf.id||_guid(POS_ID_AUTO_PREFIX),pos_map[pos_id]=new PosConfig(pos_conf));config=me,boot_up=!(!boot_up||!me.auto||null==sf.host.boot);try{boot_up&&sf.host.boot()}catch(_error){}return _mix({},config)},PosConfig=function(posIDorObj,destID,baseConf){var me,sz,sz_split,typ;return me=this,typ=posIDorObj&&typeof posIDorObj||"",me instanceof PosConfig?(typ===OBJ?(me.id=_cstr(posIDorObj.id),me.dest=_cstr(posIDorObj.dest||destID),me.bg=_cstr(posIDorObj.bg)||"transparent",me.tgt=_cstr(posIDorObj.tgt)||"_top",me.css=_cstr(posIDorObj.css),me.w=_cnum(posIDorObj.w,0),me.h=_cnum(posIDorObj.h,0),me.z=_cnum(posIDorObj.z,0),me.renderFile=_cstr(posIDorObj.renderFile)||null,me.supports=_mix({},posIDorObj.supports||SUPPORTS_FEATURES,!0,!0,!0),me.w&&me.h?me.size=me.w+"x"+me.h:(sz=_cstr(posIDorObj.size),sz?(sz_split=sz.split(/x/g),me.w=_cnum(sz_split[0],0),me.h=_cnum(sz_split[1],0),me.size=sz):me.size="")):"string"===typ?(me.id=_cstr(posIDorObj),me.dest=_cstr(destID)):(me.dest="",me.bg="transparent",me.tgt="_top",me.css="",me.w=0,me.h=0,me.size="",me.z=0,me.supports={}),me.id=me.id||_guid(POS_ID_AUTO_PREFIX),!config&&baseConf&&Config(baseConf),config&&(config.positions[me.id]=me),_mix({},me)):new PosConfig(posIDorObj,destID,baseConf)},PosMeta=function(shared_obj,owner_key,owned_obj){var get_value,me,non_shared,old,posConf,serialize,set_value,shared;return get_value=function(propKey,owner_key){var ret;return ret="",propKey&&typeof propKey===STR?(owner_key&&typeof owner_key===STR||(owner_key="shared"),ret="shared"===owner_key?shared[propKey]||"":propKey in non_shared?non_shared[prop_key]||"":""):ret},serialize=function(){var obj;return obj=new ParamHash,obj.shared=shared,obj.non_shared=non_shared,obj.toString()},set_value=function(propKey,ownerKey,value){return non_shared[ownerKey]||(non_shared[ownerKey]={}),non_shared[ownerKey][propKey]=value},me=this,shared=void 0,non_shared=void 0,old=void 0,posConf=void 0,me instanceof PosMeta?(shared={},non_shared={},owner_key&&typeof owner_key===STR?(shared_obj&&typeof shared_obj===OBJ&&(shared=_mix(shared,shared_obj)),owned_obj&&typeof owned_obj===OBJ&&(non_shared[owner_key]=owned_obj),me.toString=serialize,me.value=get_value,void(me.setValue=set_value)):me):new PosMeta(key,owned_obj,pos,shared_obj)},_create_pos_markup=function(src){var ckVal,fVer;return src&&(src.indexOf("${sf_ver}")>-1&&(src=src.replace(/\${sf_ver}/g,$sf.ver)),src.indexOf("${ck_on}")>-1&&(ckVal=_cookies_enabled_test()?"1":"0",src=src.replace(/\${ck_on}/g,ckVal)),src.indexOf("${flash_ver}")>-1&&(fVer=_get_flash_version(),src=src.replace(/\${flash_ver}/g,fVer))),_cstr(["<scr","ipt type='text/javascript', src='",src,"'></scr","ipt>"])},_get_flash_version=function(){var err,i,mimeTypes,obj,p,tmpVer;if(null!==flash_ver)return flash_ver;if(navigator.plugins&&navigator.plugins.length>0)mimeTypes=navigator.mimeTypes,mimeTypes&&mimeTypes[FLASH_MIME]&&mimeTypes[FLASH_MIME].enabledPlugin&&mimeTypes[FLASH_MIME].enabledPlugin.description&&(flash_ver=mimeTypes[FLASH_MIME].enabledPlugin.version);else if(sf.env.isIE)for(i=0;i<flashActiveXVersions.length;){try{obj=new ActiveXObject(flashActiveXVersions[i]),tmpVer=obj.GetVariable("$version"),p=tmpVer.indexOf(" "),flash_ver=p>-1?tmpVer.substr(p+1).replace(/,/g,"."):tmpVer.replace(/,/g,".");break}catch(_error){err=_error,obj=null,flash_ver=0;continue}i++}else flash_ver=0;return flash_ver},_cookies_enabled_test=function(){var cookieEnabled;return cookieEnabled=navigator.cookieEnabled?!0:!1,"undefined"!=typeof navigator.cookieEnabled||cookieEnabled||(document.cookie="testcookie",cookieEnabled=-1!==document.cookie.indexOf("testcookie")?!0:!1,navigator&&(navigator.cookieEnabled=cookieEnabled)),cookieEnabled},Position=function(posIDorObj,html,meta,conf){var id,me,msg,origHtml,typ;return me=this,typ=posIDorObj&&typeof posIDorObj,origHtml=html,me instanceof Position?null==config?(msg="Publisher Config not initialized - abort",sf.lib.logger.error(msg),void sf.info.errs.push(msg)):(typ===OBJ?_mix(me,posIDorObj):id=me.id=_cstr(posIDorObj)||_guid(POS_ID_AUTO_PREFIX),html?(me.html=html,me.src=""):me.src?me.html=_create_pos_markup(me.src):(me.html=me.html||"",me.src=""),me.html||(me.html=""),me.meta=meta||me.meta||{},me.conf=conf||me.conf||{},void(id&&(config&&config.positions[id]?me.conf=config.positions[id]:conf&&(conf.id=id,me.conf=new PosConfig(conf))))):new Position(posIDorObj,html,meta,conf)},_docNode=function(el){var compatMode,d,root;return d=el&&_doc(el)||dc,compatMode=d[COMPAT_MODE],root=d[DOC_EL],compatMode&&!operaVer&&"CSS1Compat"!==compatMode&&(root=d.body),root},_isPX=function(val){return val=_cstr(val),val&&-1===val.search(/\D+/g)?!0:val&&-1!==val.search(/px/g)?!0:void 0},_getClip=function(curSt){var clipVal,idx,len,prop,props,ret,val;if(ret=[-1,-1,-1,-1],props=[CLIP+"Top",CLIP+"Right",CLIP+"Bottom",CLIP+"Left"],idx=0,clipVal=void 0,prop=void 0,val=void 0,len=void 0,!curSt)return ret;if(ieVer)for(;prop=props[idx];)clipVal=curSt[prop],_isPX(clipVal)&&(clipVal=_cnum(clipVal,-1),clipVal>=0&&(ret[idx]=clipVal)),idx++;else if(clipVal=curSt[CLIP],clipVal&&-1!==clipVal.search(/\d+/g))for(clipVal=clipVal.replace(/\w+\(([^\)]*?)\)/g,"$1"),ret=clipVal.split(" "),ret=ret[LEN]<=1?ret.split(","):ret,len=ret[LEN],idx=0;len--;)val=ret[idx],ret[idx]=_isPX(val)?_cnum(val,-1):-1,idx++;return ret},_calcBorders=function(el,rect){var l,re,st,t;return t=0,l=0,st=void 0,re=/^t(?:able|d|h|r|head|foot)$/i,st=currentStyle(el),st&&(t=st.borderTopWidth,l=st.borderLeftWidth,t=_isPX(t)?_cnum(t,0):0,l=_isPX(l)?_cnum(l,0):0,geckVer&&re.test(_tagName(el))&&(t=l=0)),rect=rect||{t:0,l:0},rect.t+=t,rect.l+=l,rect},_get_doc_scroll=function(el){var d,db,de,def,dv,offsetX,offsetY,pos;return pos={x:0,y:0,w:0,h:0},def={scrollLeft:0,scrollTop:0,scrollWidth:0,scrollHeight:0},d=void 0,de=void 0,dv=void 0,db=void 0,offsetX=0,offsetY=0,d=_doc(el)||dc,de=d[DOC_EL]||def,db=d.body||def,dv=d.defaultView,dv&&(offsetX=_cnum(dv.pageXOffset,0),offsetY=_cnum(dv.pageYOffset,0)),pos.x=_max(de.scrollLeft,db.scrollLeft,offsetX),pos.y=_max(de.scrollTop,db.scrollTop,offsetY),pos.w=_max(de.scrollWidth,db.scrollWidth,0),pos.h=_max(de.scrollHeight,db.scrollHeight,0),pos},_getRectIE=function(el){var adjustX,adjustY,bLeft,bTop,box,compatMode,d,de,e,rect,scroll,st,_back;if(rect={t:0,l:0,r:0,b:0,w:0,h:0,z:0},_back="BackCompat",scroll=void 0,box=void 0,d=void 0,de=void 0,compatMode=void 0,st=void 0,adjustX=void 0,adjustY=void 0,bLeft=void 0,bTop=void 0,el&&1===el[NODE_TYPE])try{if(d=_doc(el)||dc,!dom.ready())return _getRectNonIE(el);scroll=_get_doc_scroll(el),box=el.getBoundingClientRect(),rect.t=box.top,rect.l=box.left,adjustX=adjustY=IE_BORDER_ADJ,compatMode=d[COMPAT_MODE],de=d[DOC_EL],st=currentStyle(de),bLeft=st.borderLeftWidth,bTop=st.borderTopWidth,6===ieVer&&compatMode!==_back&&(adjustX=adjustY=0),compatMode===_back&&(bLeft=_isPX(bLeft)?_cnum(bLeft,0):0,adjustX=bLeft,bTop=_isPX(bTop)?_cnum(bTop,0):0,adjustY=bTop,rect.t-=adjustX,rect.l-=adjustY),rect.t+=scroll.y,rect.l+=scroll.x,rect.b=rect.t+el.offsetHeight,rect.r=rect.l+el.offsetWidth,rect.w=_max(rect.r-rect.l,0),rect.h=_max(rect.b-rect.t,0),rect.z=currentStyle(el,"zIndex")}catch(_error){e=_error,rect={t:0,l:0,r:0,b:0,w:0,h:0,z:0}}return rect},_getRectNonIE=function(el){var bCheck,e,h,parentNode,rect,root,scroll,scrollLeft,scrollTop,w;if(rect={t:0,l:0,r:0,b:0,w:0,h:0,z:0},scrollTop=0,scrollLeft=0,bCheck=!1,root=_docNode(el),scroll=_get_doc_scroll(el),parentNode=void 0,w=void 0,h=void 0,el&&1===el[NODE_TYPE])try{for(rect.l=el.offsetLeft||0,rect.t=el.offsetTop||0,parentNode=el,bCheck=geckVer||wbVer>519;(parentNode=parentNode.offsetParent)&&(rect.t+=parentNode.offsetTop||0,rect.l+=parentNode.offsetLeft||0,bCheck&&_calcBorders(parentNode,rect),parentNode!==root););if(parentNode=el,"fixed"!==currentStyle(parentNode,"position")){for(parentNode=el;(parentNode=_par(parentNode))&&(1===parentNode[NODE_TYPE]&&(scrollTop=parentNode.scrollTop||0,scrollLeft=parentNode.scrollLeft||0,geckVer&&"visible"!==currentStyle(parentNode,OVER)&&_calcBorders(parentNode,rect),rect.l-=scrollLeft,rect.t-=scrollTop),parentNode!==root););rect.t+=scroll.y,rect.l+=scroll.x}else rect.t+=scroll.y,rect.l+=scroll.x;ieVer||el!==_docNode(el)?(h=el.offsetHeight,w=el.offsetWidth):(h=el.clientHeight,w=el.clientWidth),rect.b=rect.t+h,rect.r=rect.l+w,rect.w=_max(rect.r-rect.l,0),rect.h=_max(rect.b-rect.t,0),rect.z=currentStyle(el,"zIndex")}catch(_error){e=_error,rect={t:0,l:0,r:0,b:0,w:0,h:0,z:0}}return rect},docRect=function(el){var h,root,w;return root=_docNode(el),w=0,h=0,root&&(w=root.scrollWidth||0,h=root.scrollHeight||0),{t:0,l:0,b:h,r:w,w:w,h:h}},winRect=function(el){var b,h,l,r,root,t,w,wi;return wi=el&&_view(el)||win,h=wi.innerHeight||0,w=wi.innerWidth||0,t=wi.screenY||wi.screenTop||0,b=h+t,l=wi.screenX||wi.screenLeft||0,r=w+l,root=_docNode(el),h||w||!root||(h=root.clientHeight||0,w=root.clientWidth||0,r=l+w,b=t+h),{t:t,l:l,b:b,r:r,w:w,h:h}},contains=function(element,needle){var el_node_type,needle_node_type,ret;if(ret=!1,el_node_type=element&&element[NODE_TYPE]||-1,needle_node_type=needle&&needle[NODE_TYPE]||-1,1===el_node_type&&-1!==needle_node_type)if(element[CONTAINS])if(operaVer||1===needle_node_type)ret=element[CONTAINS](needle);else for(;needle;){if(element===needle){ret=!0;break}needle=needle.parentNode}else element[COMPARE_DOC_POS]&&(ret=element===needle||!!(16&element[COMPARE_DOC_POS](needle)));return ret},currentStyle=function(el,attr){var comp,e,hasAttr,val;if(val="",hasAttr=!(!arguments.length||!attr),comp="getComputedStyle",e=void 0,hasAttr)if(ieVer)try{val=el.currentStyle[attr]}catch(_error){e=_error,val=""}else try{val=_view(el)[comp](el,null)[attr]}catch(_error){e=_error,val=""}else if(ieVer)try{val=el.currentStyle}catch(_error){e=_error,val=null}else try{val=_view(el)[comp](el,null)}catch(_error){e=_error,val=null}return val},bounds=function(el,details,check_3D){var b,client_height,client_width,clip,clip_rect,cur_st,doc_rect,el_rect,exp_rect,h,is_scroll_node,is_using_doc_root_b,is_using_doc_root_r,l,offset_height,offset_width,over_x_val,over_y_val,par,r,ref_node,root,root_rect,root_scroll,scroll_height,scroll_left,scroll_top,scroll_width,t,temp_rect,w,x_hidden,xsb_h,y_hidden,ysb_w;
if(par=el&&_par(el),root=_docNode(el),el_rect=_rect(el),root_rect=_rect(root),root_scroll=_get_doc_scroll(root),doc_rect=docRect(el),clip_rect={t:0,l:0,r:0,b:0,w:0,h:0},exp_rect={t:0,l:0,r:0,b:0,xs:0,ys:0,xiv:0,yiv:0,iv:0,w:0,h:0},xsb_h=0,ysb_w=0,is_scroll_node=!1,is_using_doc_root_r=!1,is_using_doc_root_b=!1,cur_st=void 0,w=void 0,h=void 0,t=void 0,l=void 0,r=void 0,b=void 0,scroll_width=void 0,offset_width=void 0,client_width=void 0,scroll_height=void 0,offset_height=void 0,client_height=void 0,over_x_val=void 0,scroll_left=void 0,scroll_top=void 0,over_y_val=void 0,clip=void 0,x_hidden=void 0,y_hidden=void 0,ref_node=void 0,temp_rect=void 0,is_scroll_node=!1,details=details&&typeof details===OBJ?details:{},par)for(;(cur_st=currentStyle(par))&&("block"!==cur_st.display&&"absolute"!==cur_st.position&&"none"===cur_st["float"]&&"none"===cur_st.clear||(over_x_val=cur_st[OVER+"X"],over_y_val=cur_st[OVER+"Y"],clip=_getClip(cur_st),par===root?(scroll_width=root_scroll.w,scroll_height=root_scroll.h):(scroll_width=par.scrollWidth,scroll_height=par.scrollHeight),offset_width=par.offsetWidth,offset_height=par.offsetHeight,client_width=par.clientWidth,client_height=par.clientHeight,(over_x_val===HIDDEN||clip[1]>0||clip[3]>0)&&(ref_node||(x_hidden=1,ref_node=par)),(over_y_val===HIDDEN||clip[0]>0||clip[2]>0)&&(ref_node||(y_hidden=1,ref_node=par)),over_x_val===SCROLL&&(ref_node=par,xsb_h=offset_height-client_height,is_scroll_node=!0),over_y_val===SCROLL&&(ref_node||(ref_node=par),ysb_w=offset_width-client_width,is_scroll_node=!0),over_x_val===AUTO&&(ref_node||(ref_node=par),scroll_width>client_width&&(xsb_h=offset_height-client_height),is_scroll_node=!0),over_y_val===AUTO&&(ref_node||(ref_node=par),scroll_height>client_height&&(ysb_w=offset_width-client_width),is_scroll_node=!0),!ref_node))&&(par===root&&(scroll_width>client_width&&(h=win.innerHeight||0||offset_height,xsb_h=h-client_height),scroll_height>client_height&&(w=win.innerWidth||0||offset_width,ysb_w=w-client_width),is_scroll_node=!0),par=_par(par),par&&1===par[NODE_TYPE]););return el_rect.w&&el_rect.h&&(ref_node&&ref_node!==root?(cur_st=currentStyle(ref_node),"body"===_tagName(ref_node)?(ref_node=root,t=el_rect.t,l=el_rect.l):t=l=0,clip_rect=_rect(ref_node),clip[1]>0&&(clip_rect.w=clip[1],clip_rect.r=clip_rect.l+clip_rect.w),clip[3]>0&&(clip_rect.l=clip_rect.l+clip[3],clip_rect.w=clip_rect.w-clip[3]),clip[2]>0&&(clip_rect.h=clip[2],clip_rect.b=clip_rect.t+clip_rect.h),clip[0]>0&&(clip_rect.t=clip_rect.t+clip[0],clip_rect.h=clip_rect.h-clip[0]),el_rect.t>clip_rect.t&&clip_rect.t>0&&(t=el_rect.t-clip_rect.t),el_rect.l>clip_rect.l&&clip_rect.l>0&&(l=el_rect.l-clip_rect.l),scroll_top=ref_node.scrollTop,scroll_left=ref_node.scrollLeft,scroll_height=ref_node.scrollHeight,scroll_width=ref_node.scrollWidth,exp_rect.t=_max(t,0),exp_rect.l=_max(l,0),cur_st&&(x_hidden=cur_st[OVER+"X"]===HIDDEN||clip[1]>0||clip[3]>0,y_hidden=cur_st[OVER+"Y"]===HIDDEN||clip[0]>0||clip[2]>0),el_rect.t>=clip_rect.b?exp_rect.b=0:(!y_hidden&&el_rect.t>=clip_rect.b&&(y_hidden=1),exp_rect.b=scroll_height>ref_node.clientHeight?y_hidden?0:_max(scroll_height-el_rect.h-xsb_h-t,0):_max(clip_rect.h-el_rect.h-xsb_h-t,0)),el_rect.l>=clip_rect.r?exp_rect.r=0:(!x_hidden&&el_rect.l>=clip_rect.r&&(x_hidden=1),exp_rect.r=scroll_width>ref_node.clientWidth?x_hidden?0:_max(scroll_width-el_rect.w-ysb_w-l,0):_max(clip_rect.w-el_rect.w-ysb_w-l,0))):(exp_rect.t=_max(el_rect.t,0),exp_rect.l=_max(el_rect.l,0),ieVer&&"BackCompat"===dc[COMPAT_MODE]&&"no"===_attr(root,SCROLL)?y_hidden=x_hidden=1:(cur_st=currentStyle(root),cur_st&&(x_hidden=cur_st[OVER+"X"]===HIDDEN,y_hidden=cur_st[OVER+"Y"]===HIDDEN)),root_scroll.h>root.clientHeight?y_hidden?exp_rect.b=0:(is_using_doc_root_b=!0,exp_rect.b=_max(doc_rect.h-el_rect.h-xsb_h-el_rect.t,0)):exp_rect.b=_max(root_rect.h-el_rect.h-xsb_h-el_rect.t,0),root_scroll.w>root.clientWidth?x_hidden?exp_rect.r=0:(is_using_doc_root_r=!0,exp_rect.r=_max(doc_rect.w-el_rect.w-ysb_w-el_rect.l,0)):exp_rect.r=_max(root_rect.r-el_rect.w-ysb_w-el_rect.l,0)),exp_rect.xs=xsb_h?1:0,exp_rect.ys=ysb_w?1:0,exp_rect.w=exp_rect.r+exp_rect.l,exp_rect.h=exp_rect.t+exp_rect.b,ref_node&&ref_node!==root?temp_rect=clip_rect:(temp_rect=root_rect,ref_node=root),l=_max(el_rect.l,temp_rect.l),r=_min(el_rect.r,is_using_doc_root_r?_min(doc_rect.r,temp_rect.r):temp_rect.r),w=_max(r-l,0),t=_max(el_rect.t,temp_rect.t),b=_min(el_rect.b,is_using_doc_root_b?_min(doc_rect.b,temp_rect.b):temp_rect.b),h=_max(b-t,0),exp_rect.xiv=_cnum((w/el_rect.w)[TFXD](2)),exp_rect.yiv=_cnum((h/el_rect.h)[TFXD](2)),exp_rect.iv=_cnum((w*h/(el_rect.w*el_rect.h))[TFXD](2))),details.refNode=ref_node||root,details.isRoot=ref_node===root,details.canScroll=is_scroll_node,details.refRect=ref_node&&ref_node!==root?clip_rect:root_rect,details.expRect=exp_rect,details.rect=el_rect,check_3D&&!function(){var arOvrlaps,el_area,el_h,el_w,idx,len,new_iv,new_xiv,new_yiv,ovr_area,ovr_node,ovr_node_rect;if(idx=0,len=0,arOvrlaps=void 0,el_w=void 0,el_h=void 0,el_area=void 0,ovr_node=void 0,ovr_node_rect=void 0,t=void 0,b=void 0,l=void 0,r=void 0,h=void 0,w=void 0,ovr_area=void 0,new_iv=void 0,new_xiv=void 0,new_yiv=void 0,exp_rect.iv>.5&&(mgr_bounds_details=details,arOvrlaps=overlaps(el,_cnum(check_3D,1,1)),mgr_bounds_details=null,len=arOvrlaps[LEN],el_w=el_rect.w,el_h=el_rect.h,el_area=el_w*el_h,len))for(;ovr_node=arOvrlaps[idx++];)ovr_node_rect=_rect(ovr_node),l=_max(el_rect.l,ovr_node_rect.l),r=_min(el_rect.r,ovr_node_rect.r),t=_max(el_rect.t,ovr_node_rect.t),b=_min(el_rect.b,ovr_node_rect.b),w=r-l,h=b-t,ovr_area=w*h,new_xiv=(1-w/el_w)[TFXD](2),new_yiv=(1-h/el_h)[TFXD](2),new_iv=(1-ovr_area/el_area)[TFXD](2),(new_xiv>0&&new_xiv<exp_rect.xiv||new_yiv>0&&new_yiv<exp_rect.yiv)&&(exp_rect.xiv=new_xiv,exp_rect.yiv=new_yiv,exp_rect.iv=new_iv)}(),exp_rect},overlaps=function(el,limit){var baseH,baseW,checkEl,curH,curW,doc,factor,h,id,idx,l,maxX,maxY,par_details,points,pt,rect,ref_par_node,ref_par_rect,ret,root,seen,t,w,x,y;if(rect=_rect(el),doc=_doc(el),root=_docNode(doc),t=rect.t,l=rect.l,w=rect.r-rect.l,h=rect.b-rect.t,factor=INTERSECT_FACTOR,ret=[],baseW=_round(w/factor),baseH=_round(h/factor),curW=baseW,curH=baseH,seen={},par_details={},points=[],idx=0,x=void 0,y=void 0,pt=void 0,id=void 0,checkEl=void 0,ref_par_node=void 0,ref_par_rect=void 0,maxX=void 0,maxY=void 0,mgr_bounds_details?par_details=mgr_bounds_details:bounds(el,par_details,!0),ref_par_node=par_details.refNode,ref_par_rect=par_details.refRect,ref_par_rect&&ref_par_node&&ref_par_node!==root?(maxX=ref_par_rect.r,maxY=ref_par_rect.b):(maxX=l+w,maxY=t+h),doc&&root&&doc[EL_FROM_PT]){for(;w>curW;){for(curH=baseH;h>curH;)x=l+curW,y=t+curH,maxX>x&&maxY>y&&points.push([x,y]),curH+=baseH;curW+=baseW}for(limit=_cnum(limit,points[LEN]);pt=points[idx++];){checkEl=doc[EL_FROM_PT](pt[0],pt[1]);try{checkEl&&1===checkEl.nodeType&&checkEl!==root&&checkEl!==el&&!contains(el,checkEl)&&(id=_attr(checkEl,"id"),id||(id=lang.guid("geom_inter"),_attr(checkEl,"id",id)),!seen[id]&&ret[LEN]<limit&&(seen[id]=1,ret.push(checkEl)))}catch(_error){}}}id="";for(id in seen)0===id.indexOf("geom_inter")&&(checkEl=_elt(id),checkEl&&_attr(checkEl,"id",null));return ret},_call_xmsg_host_fb=function(methName,arg1,arg2,arg3){return msghostfb||(msghostfb=dom.msghost_fb),methName&&msghostfb&&msghostfb[methName]&&msghostfb[methName](arg1,arg2,arg3)},_check_html5_init=function(evt){!canUseHTML5&&evt&&evt.data===initID&&(canUseHTML5=!0,dom.evtCncl(evt),dom[DETACH](win,MSG,_check_html5_init))},_handle_msg_from_outside=function(evt){var cb,data,dataGUID,e,fr_win,ifr,msg_win,params,pipe,pipeGUID,ret,tgtID;if(data=evt&&evt.data,msg_win=evt&&evt.source,params=data&&-1!==data.indexOf(GUID)&&ParamHash(data),tgtID=params&&params.id,ifr=tgtID&&_elt(tgtID),fr_win=ifr&&_ifr_view(ifr),pipe=tgtID&&msg_pipes[tgtID],dataGUID=params&&params[GUID],pipeGUID=pipe&&pipe[GUID],cb=pipe&&pipe._xmsgcb,ret=!1,pipeGUID&&dataGUID&&dataGUID===pipeGUID&&msg_win&&fr_win&&fr_win===msg_win)try{ret=cb(params.msg)}catch(_error){e=_error,ret=!1}return ret&&dom.evtCncl(evt),ret},send_msg_to_child_iframe=function(tgtID,data){var e,el,msgObj,pipe,success,w;if(pipe=tgtID&&msg_pipes[tgtID],success=!1,msgObj=void 0,w=void 0,el=void 0,e=void 0,pipe){if(pipe)if(msgObj=ParamHash(),msgObj.msg=data,msgObj.guid=pipe.guid,usingHTML5()){el=_elt(tgtID),w=_ifr_view(el);try{w[PMSG](_cstr(msgObj),pipe.srcHost||"*"),success=!0}catch(_error){e=_error,success=!1}}else success=_call_xmsg_host_fb("send",tgtID,data)}else success=_call_xmsg_host_fb("send",tgtID,data);return msgObj=w=el=null,success},usingHTML5=function(){return canUseHTML5},_strippedEncodedLocation=function(){var cleaned,pos;return cleaned=void 0,pos=loc.href.indexOf("#"),cleaned=pos>-1?loc.href.substr(0,pos):loc.href,pos=cleaned.indexOf("?"),pos>-1&&(cleaned=cleaned.substr(0,pos)),escape(cleaned)},prep_iframe_msging=function(attrs){var iframeName,locStripped,nameParams,newPipe,pipe,src,srcHost;return pipe=null,iframeName=void 0,nameParams=void 0,src=void 0,srcHost=void 0,newPipe=void 0,locStripped=_strippedEncodedLocation(),attrs&&(iframeName=attrs.name,nameParams=ParamHash(iframeName),src=_cstr(attrs.src),srcHost=src&&src.substring(0,src.indexOf("/",9)),srcHost=0!==srcHost.search(/http/g)?"":srcHost,pipe=ParamHash(nameParams),pipe.id=attrs.id||"iframe_"+_guid(),pipe.src=src,pipe.srcHost=srcHost,pipe[GUID]=pipe[GUID]||_guid(),pipe.host=locHost,pipe.loc=locStripped,pipe.proxyID="",usingHTML5()?(pipe.html5=1,pipe.proxyPath=""):(newPipe=_call_xmsg_host_fb("prep",pipe),newPipe&&(pipe=newPipe)),attrs.name=pipe),pipe},attach_iframe_msging=function(el,pipe,cb){var tgtID;tgtID=void 0,"iframe"===_tagName(el)&&(tgtID=_attr(el,"id"),tgtID&&pipe&&pipe instanceof ParamHash&&tgtID===pipe.id&&(usingHTML5()?(msg_pipes[tgtID]=pipe,pipe._xmsgcb=cb,html5Bound||(dom[ATTACH](win,MSG,_handle_msg_from_outside),html5Bound=!0)):_call_xmsg_host_fb(ATTACH,el,pipe,cb)))},detach_iframe_msging=function(el){var empty,id,pipe,w;if(id=_attr(el,"id"),pipe=id&&msg_pipes[id],w=null,empty=!0,!pipe)return void _call_xmsg_host_fb(DETACH,el);pipe&&(pipe._xmsgcb=msg_pipes[id]=null,pipe=null,delete msg_pipes[id]),id="";for(id in msg_pipes)if(pipe=msg_pipes[id],pipe&&pipe[GUID]){empty=!1;break}empty&&usingHTML5()&&html5Bound&&(html5Bound=!1,dom[DETACH](win,MSG,_handle_msg_from_outside)),el=w=pipe=null},_fire_pub_callback=function(cb_name){var a,args,cb_args,e,f,idx,len,ret;if(cb_args=[],args=arguments,len=args[LEN],idx=0,f=void 0,ret=!1,e=void 0,a=void 0,config&&(f=config[cb_name])){for(;len--;)a=args[idx++],a!==cb_name&&cb_args.push(a);try{ret=f.apply(null,cb_args)}catch(_error){e=_error,ret=!1}}return ret},_handle_render_timeout=function(pos_id){var pend;pend=pos_id&&pending_ifrs[pos_id],pend&&(clearTimeout(pend),nuke(pos_id),_fire_pub_callback(POS_MSG,"render-timeout",pos_id)),_has_pending_renders()||(current_status="")},_clear_geom_update_timer=function(){geom_update_timer&&(clearTimeout(geom_update_timer),geom_update_timer=0)},_clear_focus_update_timer=function(){focus_update_timer&&(clearTimeout(focus_update_timer),focus_update_timer=0)},_set_focus_update_timer=function(in_focus){_clear_focus_update_timer(),focus_update_timer=setTimeout(function(){_update_focus(in_focus)},2)},_set_geom_update_timer=function(is_win_scroll){_clear_geom_update_timer(),geom_update_timer=is_win_scroll?setTimeout(_update_geom_win_scroll,GEOM_UPDATE_INTRVAL):setTimeout(_update_geom_win_resize,GEOM_UPDATE_INTRVAL)},_update_geom=function(is_win_scroll){var g,id,ifr,msgObj,params,posID;posID=void 0,params=void 0,msgObj=void 0,id=void 0,ifr=void 0,g=void 0;for(posID in rendered_ifrs)is_win_scroll&&posID in scroll_parents_attached||(params=rendered_ifrs[posID],id=params&&params.dest,ifr=id&&_elt(id),ifr&&params&&(g=_build_geom(posID,ifr,!0),msgObj=ParamHash(),msgObj.pos=posID,msgObj.cmd=NOTIFY_GEOM_UPDATE,msgObj.geom=_es(g),_fire_pub_callback(POS_MSG,posID,NOTIFY_GEOM_UPDATE,g),_send_response(params,msgObj)));_clear_geom_update_timer()},_update_geom_win_resize=function(){_update_geom()},_update_geom_win_scroll=function(){_update_geom(!0)},_handle_node_scroll=function(evt,posID){var g,scr_handle;scr_handle=scroll_parents_attached[posID],g=void 0,scr_handle&&(scr_handle.tID&&(clearTimeout(scr_handle.tID),delete scr_handle.tID),scr_handle.tID=setTimeout(function(){var id,ifr,msgObj,params;params=rendered_ifrs[posID],id=params&&params.dest,ifr=id&&_elt(id),g=void 0,msgObj=void 0,ifr&&params&&(g=_build_geom(posID,ifr,!0),msgObj=ParamHash(),msgObj.pos=posID,msgObj.cmd=NOTIFY_GEOM_UPDATE,msgObj.geom=_es(g),_fire_pub_callback(POS_MSG,posID,NOTIFY_GEOM_UPDATE,g),_send_response(params,msgObj)),delete scr_handle.tID},GEOM_UPDATE_INTRVAL))},_handle_win_geom_scroll=function(){_set_geom_update_timer(1)},_handle_win_geom_resize=function(){_set_geom_update_timer()},_update_focus=function(in_focus){var data,id,ifr,msgObj,params,posID;posID=void 0,params=void 0,msgObj=void 0,id=void 0,ifr=void 0;for(posID in rendered_ifrs)params=rendered_ifrs[posID],id=params&&params.dest,ifr=id&&_elt(id),ifr&&params&&(msgObj=ParamHash(),data=ParamHash(),msgObj.pos=posID,msgObj.cmd=data.cmd=NOTIFY_FOCUS_CHANGE,msgObj.value=in_focus,_fire_pub_callback(POS_MSG,posID,NOTIFY_FOCUS_CHANGE,in_focus),_send_response(params,msgObj));_clear_focus_update_timer()},_handle_win_focus=function(){_set_focus_update_timer(!0)},_handle_win_blur=function(){_set_focus_update_timer(!1)},_handle_unload=function(){var e,prop,scr_handle;prop=void 0,scr_handle=void 0,e=void 0,_clear_geom_update_timer();try{dom.detach(win,SCROLL,_handle_win_geom_scroll),dom.detach(win,"resize",_handle_win_geom_resize),dom.detach(win,"unload",_handle_unload),dom.detach(win,"focus",_handle_win_focus),dom.detach(win,"blur",_handle_win_blur);for(prop in scroll_parents_attached)scr_handle=scroll_parents_attached[prop],scr_handle&&(scr_handle.tID&&clearTimeout(scr_handle.tID),dom.detach(scroll_parents_attached[prop],SCROLL,scr_handle[ONSCROLL]),scr_handle[ONSCROLL]=scr_handle.node=null),scroll_parents_attached[prop]=null,delete scroll_parents_attached[prop];win_events_attached=!1}catch(_error){}},_handle_msg_evt=function(data){var canRead,canWrite,info,msgObj,ret;return msgObj=void 0,ret=!1,info=void 0,msgObj=ParamHash(data,null,null,!0,!0),msgObj&&msgObj.pos&&(info=rendered_ifrs[msgObj.pos],info&&(ret=function(){switch(msgObj.cmd){case"exp-push":return _expand_safeframe(msgObj,!0),!0;case"exp-ovr":return _expand_safeframe(msgObj),!0;case"collapse":return _collapse_safeframe(msgObj),!0;case"msg":case"clicked":case"viewed":case"requested":case"unviewed":case"reload":return _fire_pub_callback(POS_MSG,msgObj.pos,msgObj.cmd,msgObj.msg),_send_generic_response(msgObj.pos,msgObj.cmd),!0;case"loaded":return _fire_pub_callback("onAdLoad",msgObj.pos,msgObj),_send_generic_response(msgObj.pos,msgObj.cmd),!0;case ERROR_COMMAND:return _record_error(msgObj),!0;case NOTIFY_GEOM_UPDATE:return sf.lib.logger.log("Geom update complete: "+msgObj.pos),!0;case"read-cookie":return canRead=info.conf&&info.conf.supports&&info.conf.supports[msgObj.cmd]&&"0"!==info.conf.supports[msgObj.cmd],canRead?(_read_cookie(msgObj),_fire_pub_callback("onCookieRead",msgObj.pos,msgObj.cookie),!0):!1;case"write-cookie":return canWrite=info.conf&&info.conf.supports&&info.conf.supports[msgObj.cmd]&&"0"!==info.conf.supports[msgObj.cmd],canWrite?(_write_cookie(msgObj),_fire_pub_callback("onCookieWrite",msgObj.pos,msgObj.cookie),!0):!1}}())),ret},_has_pending_renders=function(){var all_renders_done,pos_id;all_renders_done=!0,pos_id=void 0;for(pos_id in pending_ifrs){all_renders_done=!1;break}return all_renders_done},_send_response=function(params,msgObj){current_status="sending-msg-down-"+msgObj.cmd,setTimeout(function(){var id;id=params&&params.dest,id&&msgObj&&send_msg_to_child_iframe(id,msgObj.toString()),current_status="",msgObj=id=params=null},XCOM_RESP_DELAY)},_handle_frame_load=function(){var all_renders_done,el,pos_id;el=this,pos_id=dom.attr(el,"_pos_id"),all_renders_done=!0,pending_ifrs[pos_id]&&(clearTimeout(pending_ifrs[pos_id]),delete pending_ifrs[pos_id],complete_ifrs[pos_id]=pos_id,dom.attr(el,"_pos_id",null),dom.attr(el,"name",null),el[ST].visibility="inherit",el[ST].display="block",_fire_pub_callback("onEndPosRender",pos_id)),_has_pending_renders()||(current_status="")},_shim_frame=function(id,showIt,w,h,z){var ifr,shmFrm,shmID;if(isIE)if(ifr=_elt(id),shmID="shm_"+id,shmFrm=_elt(shmID),showIt){if(shmFrm)return void(shmFrm[ST].visibility="visible");shmFrm=iframes.clone(ifr,{id:shmID,src:"",name:shmID},[WIDTH,":",w,PX,";position:absolute;",HEIGHT,":",h,PX,";z-index:",z-1,";filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0)"]),dom.append(_par(ifr),shmFrm)}else!showIt&&shmFrm&&(shmFrm[ST].visibility="hidden")},_build_geom=function(posID,dest,dont_attach_scroll_evt){var details,e,ex,info,new_ref_node,node,s,scr_handle;bounds=void 0,info=ParamHash(),details={},scr_handle=void 0,node=void 0,new_ref_node=void 0,ex=void 0,s=void 0,e=void 0;try{bounds=dom.bounds(dest,details,!0),dont_attach_scroll_evt||details.isRoot||!details.canScroll||(ex=details.expRect,(ex.xs||ex.ys)&&(scr_handle=scroll_parents_attached[posID],new_ref_node=details.refNode,scr_handle&&scr_handle.node!==new_ref_node&&(scr_handle.tID&&clearTimeout(scr_handle.tID),dom.detach(node,SCROLL,scr_handle[ONSCROLL]),scr_handle.node=scr_handle[ONSCROLL]=null,scroll_parents_attached[posID]=null,delete scroll_parents_attached[posID]),scroll_parents_attached[posID]||(scr_handle={},scr_handle.node=new_ref_node,scr_handle[ONSCROLL]=function(evt){_handle_node_scroll(evt,posID)},scroll_parents_attached[posID]=scr_handle,dom.attach(new_ref_node,SCROLL,scr_handle[ONSCROLL]))))}catch(_error){e=_error,info=null}try{info&&(info.win=ParamHash(dom.winRect()),info.par=ParamHash(details.refRect),ex=ParamHash(details.expRect),s=ParamHash(details.rect),s.iv=ex.iv,s.xiv=ex.xiv,s.yiv=ex.yiv,delete ex.iv,delete ex.xiv,delete ex.yiv,info.exp=ex,info.self=s)}catch(_error){e=_error,info=null}return info},_expand_safeframe=function(msgObj,push){var b,delta,dx,dy,exp,id,ifr,ifrSt,l,nHt,nWd,orHt,orWd,par,parSt,params,params_conf,posID,r,scr_handle,t,xn,yn,z;xn=!1,yn=!1,posID=msgObj&&msgObj.pos,params=void 0,params_conf=void 0,ifr=void 0,par=void 0,ifrSt=void 0,parSt=void 0,orWd=void 0,orHt=void 0,dx=void 0,dy=void 0,nWd=void 0,nHt=void 0,id=void 0,t=void 0,l=void 0,r=void 0,b=void 0,exp=void 0,z=void 0,delta=void 0,scr_handle=void 0,posID&&(params=rendered_ifrs[posID],params_conf=params&&params.conf,params&&params_conf&&(id=params.dest,ifr=_elt(id),par=_elt(POS_REL_BOX_ID_PREFIX+"_"+posID),ifr&&par&&(ifrSt=ifr[ST],parSt=par[ST],ifrSt&&(scr_handle=scroll_parents_attached[posID],scr_handle&&scr_handle.tID&&clearTimeout(scr_handle.tID),_clear_geom_update_timer(),exp=msgObj.exp_obj,orWd=params_conf.w,orHt=params_conf.h,exp?(t=_cnum(exp.t,0,0),l=_cnum(exp.l,0,0),r=_cnum(exp.r,0,0),b=_cnum(exp.b,0,0),nWd=_cnum(orWd+l+r,0,0),nHt=_cnum(orHt+t+b,0,0),t?(dy=-1*t,yn=!0):dy=0,l?(dx=-1*l,xn=!0):dx=0):(dx=params.dx=_cnum(msgObj.dx),dy=params.dy=_cnum(msgObj.dy),xn=0>dx,yn=0>dy,nWd=xn?orWd+-1*dx:orWd+dx,nHt=yn?orHt+-1*dy:orHt+dy),orWd>=nWd&&orHt>=nHt||_fire_pub_callback(BF_POS_MSG,posID,EXPAND_COMMAND,dx,dy)||(ifrSt[WIDTH]=nWd+PX,ifrSt[HEIGHT]=nHt+PX,xn&&(ifrSt.left=dx+PX),yn&&(ifrSt.top=dy+PX),z=_cnum(params.z,0),z||(z=DEFAULT_ZINDEX),ifrSt.zIndex=z,_shim_frame(id,!0,nWd,nHt,z-1),push?(parSt[WIDTH]=nWd+PX,parSt[HEIGHT]=nHt+PX):(parSt[WIDTH]=orWd+PX,parSt[HEIGHT]=orHt+PX),params.expanded=!0,msgObj.dx=dx,msgObj.dy=dy,msgObj.w=nWd,msgObj.h=nHt,msgObj.cmd="expand",msgObj.geom=_es(_build_geom(posID,ifr,!0)),_fire_pub_callback(POS_MSG,posID,EXPAND_COMMAND,dx,dy),_send_response(params,msgObj),ifrSt=par=ifr=params=msgObj=null)))))},_collapse_safeframe=function(msgObj,isOutside,noMsging){var id,ifr,ifrSt,par,parSt,params,params_conf,posID,scr_handle;posID=msgObj&&msgObj.pos,params=posID&&rendered_ifrs[posID],params_conf=params&&params.conf,id=params_conf&&params_conf.dest,ifr=id&&_elt(id),par=ifr&&_elt(POS_REL_BOX_ID_PREFIX+"_"+posID),ifrSt=ifr&&ifr[ST],parSt=par&&par[ST],scr_handle=void 0,posID&&params&&ifr&&par&&params.expanded&&(scr_handle=scroll_parents_attached[posID],scr_handle&&scr_handle.tID&&clearTimeout(scr_handle.tID),_clear_geom_update_timer(),(noMsging||!_fire_pub_callback(BF_POS_MSG,posID,COLLAPSE_COMMAND,0,0))&&(ifrSt.left=ifrSt.top="0px",parSt[WIDTH]=ifrSt[WIDTH]=params_conf.w+PX,parSt[HEIGHT]=ifrSt[HEIGHT]=params_conf.h+PX,ifrSt.zIndex=params.dx=params.dy=0,_shim_frame(id),noMsging||(_fire_pub_callback(POS_MSG,posID,COLLAPSE_COMMAND,0,0),msgObj.cmd=isOutside?"collapsed":"collapse",msgObj.geom=_es(_build_geom(posID,ifr,!0)),_send_response(params,msgObj)),ifr=ifrSt=par=parSt=params=msgObj=null))},_record_error=function(msgObj){var id,ifr,ifrSt,par,parSt,params,params_conf,posID,scr_handle;posID=msgObj&&msgObj.pos,params=posID&&rendered_ifrs[posID],params_conf=params&&params.conf,id=params_conf&&params_conf.dest,ifr=id&&_elt(id),par=ifr&&_elt(POS_REL_BOX_ID_PREFIX+"_"+posID),ifrSt=ifr&&ifr[ST],parSt=par&&par[ST],scr_handle=void 0,sf&&sf.info&&sf.info.errs&&sf.info.errs.push(msgObj),_fire_pub_callback(POS_MSG,posID,ERROR_COMMAND,msgObj)},_cookieHash=function(){var c,cookies,cooks,i,key;for(cooks=void 0,key=void 0,i=void 0,cookies={},c=void 0,cooks=document.cookie.split("; "),i=cooks.length-1;i>=0;)c=cooks[i].split("="),cookies[c[0]]=c[1],i--;return cookies},_read_cookie=function(msgObj){var canRead,command,cookies,id,ifr,key,params,params_conf,posID;posID=msgObj&&msgObj.pos,params=posID&&rendered_ifrs[posID],params_conf=params&&params.conf,id=params_conf&&params_conf.dest,ifr=id&&_elt(id),key=void 0,cookies=void 0,command="read-cookie",canRead=params_conf.supports&&params_conf.supports[command]&&"0"!==params_conf.supports[command],canRead&&posID&&params&&ifr&&(key=msgObj.cookie,key&&(cookies=_cookieHash(),_fire_pub_callback(POS_MSG,command,posID,0,0),msgObj.cmd=command,msgObj.geom=_es(_build_geom(posID,ifr,!0)),msgObj.value=cookies[key],_send_response(params,msgObj),ifr=params=msgObj=null))},_write_cookie=function(msgObj){var c_value,canRead,command,cookies,exdate,id,ifr,key,newCookies,newValue,params,params_conf,posID;posID=msgObj&&msgObj.pos,params=posID&&rendered_ifrs[posID],params_conf=params&&params.conf,id=params_conf&&params_conf.dest,ifr=id&&_elt(id),key=void 0,newValue=void 0,cookies=void 0,newCookies=void 0,command="write-cookie",canRead=params_conf.supports&&params_conf.supports[command]&&"0"!==params_conf.supports[command],canRead&&posID&&params&&ifr&&(key=msgObj.cookie,key&&(newValue=escape(msgObj.value),exdate=new Date,exdate.setDate(exdate.getDate()+1),c_value=newValue+"; expires="+exdate.toUTCString(),document.cookie=key+"="+c_value,_fire_pub_callback(POS_MSG,command,posID,0,0),msgObj.cmd=command,msgObj.geom=_es(_build_geom(posID,ifr,!0)),msgObj.info=newValue,msgObj.value="",_send_response(params,msgObj),ifr=params=msgObj=null))},nuke=function(){var args,el,el_id,empty,idx,par,pos,pos_id,sb_rel;if(idx=0,empty=!0,args=arguments,pos_id=void 0,pos=void 0,el_id=void 0,el=void 0,sb_rel=void 0,par=void 0,!args[LEN]||"*"===args[idx]){args=[];for(pos_id in rendered_ifrs)args.push(pos_id)}for(;pos_id=args[idx++];)pos=rendered_ifrs[pos_id],pos&&(pos_id in pending_ifrs&&(clearTimeout(pending_ifrs[pos_id]),delete pending_ifrs[pos_id]),pos_id in complete_ifrs&&delete complete_ifrs[pos_id],el_id=pos.dest,el=el_id&&_elt(el_id),par=el&&_par(el),-1!==dom.attr(par,"id").indexOf(POS_REL_BOX_ID_PREFIX)&&(sb_rel=par,par=_par(sb_rel)),dom.purge(el),sb_rel&&dom.purge(sb_rel),rendered_ifrs[pos_id]=null,delete rendered_ifrs[pos_id],el=dom.make("div"),dom.attr(el,"id",el_id),dom.append(par,el));pos_id="";for(pos_id in rendered_ifrs){empty=!1;break}empty&&(current_status="",_handle_unload())},render=function(){var args,css_txt,dest_el,dest_id,dest_rel_id,e,finalCSSEnd,finalCSSPos,firstCSSPos,h,idx,name_params,new_dest_el,par_el,pend,pos,pos_conf,pos_id,rel_el,st,w;if(idx=0,args=arguments,firstCSSPos="relative",finalCSSPos="absolute",finalCSSEnd="top:0px;left:0px;visibility:hidden;display:none;",pos=void 0,pos_id=void 0,pos_conf=void 0,dest_el=void 0,new_dest_el=void 0,rel_el=void 0,par_el=void 0,name_params=void 0,dest_id=void 0,dest_rel_id=void 0,css_txt=void 0,w=void 0,h=void 0,st=void 0,e=void 0,pend=void 0,!config)return!1;if(!dom.ready())return dom.wait(function(){render.apply(null,args),args=null}),null;for(args[0]instanceof Array&&1===args[LEN]&&(args=args[0]);pos=args[idx++];)if(pos_id=pos.id,pos_conf=pos_id?config.positions[pos_id]:null,pos_conf&&(dest_id=pos_conf.dest,dest_el=dest_id&&_elt(dest_id))){if(w=pos_conf.w,h=pos_conf.h,!w){try{w=dest_el.offsetWidth}catch(_error){e=_error,w=0}w&&(pos_conf.w=w)}if(!h){try{h=dest_el.offsetHeight}catch(_error){e=_error,h=0}h&&(pos_conf.h=h)}w&&h&&(name_params=new ParamHash,dest_rel_id=POS_REL_BOX_ID_PREFIX+"_"+pos_id,rel_el=_elt(dest_rel_id),par_el=_par(dest_el),rel_el&&par_el===rel_el&&(par_el=_par(rel_el)),_shim_frame(dest_id),pend=pending_ifrs[pos_id],pend&&clearTimeout(pend),pend=complete_ifrs[pos_id],pend&&delete complete_ifrs[pos_id],pending_ifrs[pos_id]=setTimeout(function(){_handle_render_timeout(pos_id)},config.to),current_status="rendering",_fire_pub_callback("onStartPosRender",pos_id,pos_conf,pos),css_txt=["position:","",";z-index:0;",WIDTH,":",w,PX,";",HEIGHT,":",h,PX,";","visibility:inherit;"],rel_el?(st=rel_el[ST],st.width=w+PX,st.height=h+PX,st=dest_el&&dest_el[ST],st.width=w+PX,st.height=h+PX):(css_txt[1]=firstCSSPos,rel_el=dom.make("div"),rel_el.id=dest_rel_id,rel_el.className="iab_sf",new_dest_el=dest_el.cloneNode(!1),dom.css(new_dest_el,css_txt),rel_el.appendChild(new_dest_el),dom.css(rel_el,css_txt),par_el.replaceChild(rel_el,dest_el),dest_el=_elt(dest_id)),name_params.id=pos_id,name_params.dest=dest_id,name_params.conf=ParamHash(pos_conf),name_params.meta=pos.meta.toString(),name_params.html=_es(pos.html),name_params.geom=_es(_build_geom(pos_id,dest_el)),name_params.src=pos_conf.renderFile||config.renderFile,name_params.has_focus=lang.cstr(document.hasFocus()),css_txt[1]=finalCSSPos,css_txt[13]=finalCSSEnd,win_events_attached||(dom.attach(win,SCROLL,_handle_win_geom_scroll),dom.attach(win,"resize",_handle_win_geom_resize),dom.attach(win,"unload",_handle_unload),dom.attach(win,"focus",_handle_win_focus),dom.attach(win,"blur",_handle_win_blur),win_events_attached=!0),iframes.replace({id:dest_id,name:name_params,src:pos_conf.renderFile||config.renderFile,_pos_id:pos_id},css_txt,rel_el,_handle_frame_load,_handle_msg_evt),rendered_ifrs[pos_id]=name_params)}},get=function(positionId){var obj;return obj=rendered_ifrs[positionId],obj?_mix({},obj):null},status=function(){return current_status},_send_generic_response=function(posID,command){var msgObj,params;return msgObj=new ParamHash,params=posID&&rendered_ifrs[posID],msgObj.cmd=command,msgObj.pos=posID,_send_response(params,msgObj)},_getGeom=function(posID){var g,id,ifr,params;return params=rendered_ifrs[posID],id=params&&params.dest,ifr=id&&_elt(id),g=_build_geom(posID,ifr,!0)},inViewPercentage=function(posID){var geom_info,iv,tv,_ref;return geom_info=_getGeom(posID),iv=_cnum(null!=geom_info&&null!=(_ref=geom_info.self)?_ref.iv:void 0,-1,0),iv>=0&&(tv=Math.floor(100*iv)),tv},lang&&win===top&&(_rect=ieVer?_getRectIE:_getRectNonIE,_mix(dom,{rect:_rect,currentStyle:currentStyle,contains:contains,docRect:docRect,winRect:winRect,bounds:bounds,overlaps:overlaps}),function(){var e;e=void 0,dom.msghost={prep:prep_iframe_msging,attach:attach_iframe_msging,detach:detach_iframe_msging,usingHTML5:usingHTML5,send:send_msg_to_child_iframe},dom[ATTACH](win,MSG,_check_html5_init),initID="xdm-html5-init-"+_guid(),locHost=0===locHost.indexOf("file")?locHost="file":locHost;try{win[PMSG](initID,"file"===locHost?"*":locHost)}catch(_error){e=_error,dom[DETACH](win,MSG,_check_html5_init)}}(),_mix(sf.host,{Config:Config,PosConfig:PosConfig,PosMeta:PosMeta,Position:Position,nuke:nuke,get:get,render:render,status:status,inViewPercentage:inViewPercentage})),sf}(window,sf)}).call(this)},{"./boot":16}],18:[function(require,module){(function(){var dom,env,lang,logger;lang=require("./lang"),env=require("./env"),dom=require("./dom"),logger=require("./logger"),module.exports=function(lang,env,dom,logger){return{ver:"1-1-0",specVersion:"1.1",lib:{lang:lang,dom:dom,logger:logger},env:env,host:{},ext:{},info:{errs:[],list:[]}}}(lang,env,dom,logger)}).call(this)},{"./dom":19,"./env":20,"./lang":21,"./logger":22}],19:[function(require,module){(function(){var env,lang;lang=require("./lang"),env=require("./env"),module.exports=function(window,lang,env){var BLANK_URL,EVT_CNCL_METHODS,GC,IE_GC_INTERVAL,IFRAME,append,attach,attr,clone_iframe,css,detach,doc,dom,dom_is_ready,dom_last_known_child_node,dom_last_known_tag_count,dom_ready_chk_max_tries,dom_ready_chk_timer_id,dom_ready_chk_tries,dom_ready_chk_try_interval,elt,evtCncl,evtTgt,evt_tgt_prop_a,evt_tgt_prop_b,gc,gc_timer_id,ie_attach,ie_detach,iframe_cbs_attached,iframe_msg_host_lib,iframe_next_id,iframe_view,isIE,make_element,make_iframe,par,purge,ready,replace_iframe,tagName,tags,theDocument,useOldStyleAttrMethods,use_attach,use_detach,use_ie_old_attach,view,w3c_attach,w3c_detach,wait,win,_bind_iframe_onload,_byID,_call_xmsg_host,_callable,_clear_ready_timer_check,_clone_iframe,_cstr,_env,_handle_dom_load_evt,_lang,_ready_state_check,_unbind_iframe_onload;return dom={},_lang=lang,_env=env,win=window,IFRAME="iframe",GC="CollectGarbage",ie_attach="attachEvent",w3c_attach="addEventListener",ie_detach="detachEvent",w3c_detach="removeEventListener",use_attach="",use_detach="",use_ie_old_attach=!1,IE_GC_INTERVAL=3e3,EVT_CNCL_METHODS={preventDefault:0,stopImmediatePropagation:0,stopPropagation:0,preventBubble:0},isIE=env.isIE,useOldStyleAttrMethods=!1,gc_timer_id=0,dom_is_ready=null,dom_last_known_tag_count=0,dom_last_known_child_node=null,dom_ready_chk_max_tries=300,dom_ready_chk_try_interval=50,dom_ready_chk_tries=0,dom_ready_chk_timer_id=0,iframe_next_id=0,iframe_cbs_attached={},evt_tgt_prop_a="",evt_tgt_prop_b="",iframe_msg_host_lib=null,theDocument=win.document,BLANK_URL="about:blank",_cstr=lang.cstr,_callable=lang.callable,_clear_ready_timer_check=function(){dom_ready_chk_timer_id&&(clearTimeout(dom_ready_chk_timer_id),dom_ready_chk_timer_id=0)},_handle_dom_load_evt=function(){detach(win,"load",_handle_dom_load_evt),detach(win,"DOMContentLoaded",_handle_dom_load_evt),dom_is_ready=!0},_ready_state_check=function(){var b,e,kids,lst,tag_cnt;if(_clear_ready_timer_check(),dom_ready_chk_tries>=dom_ready_chk_max_tries&&(dom_last_known_child_node=null,dom_is_ready=!0),null===dom_is_ready){try{b=theDocument&&theDocument.body,kids=b&&tags("*",b),tag_cnt=kids&&kids[LEN],lst=b&&b.lastChild}catch(_error){e=_error,dom_last_known_tag_count=0,dom_last_known_child_node=null}dom_last_known_tag_count&&tag_cnt===dom_last_known_tag_count&&lst===dom_last_known_child_node?(dom_last_known_child_node=null,dom_is_ready=!0):(dom_last_known_tag_count=tag_cnt,dom_last_known_child_node=lst,dom_ready_chk_tries+=1,dom_ready_chk_timer_id=setTimeout(_ready_state_check,dom_ready_chk_try_interval))}else dom_last_known_child_node=null},_unbind_iframe_onload=function(el){var id,oldCB;id=attr(el,"id"),oldCB=void 0,oldCB=id&&iframe_cbs_attached[id],oldCB&&(detach(el,"load",oldCB),iframe_cbs_attached[id]=null,delete iframe_cbs_attached[id])},_bind_iframe_onload=function(el,cb){var id,newCB;newCB=void 0,id=void 0,_callable(cb)&&(newCB=function(evt){var e,tgt;if(tgt=evtTgt(evt),e=void 0,_unbind_iframe_onload(tgt),tgt&&cb)try{cb.call(tgt,evt)}catch(_error){}tgt=el=cb=newCB=id=null},id=attr(el,"id"),_unbind_iframe_onload(el),id&&(iframe_cbs_attached[id]=newCB),attach(el,"load",newCB)),newCB=null},_byID=function(el){return el&&"string"==typeof el?elt(el)||el:el},_call_xmsg_host=function(methName,arg1,arg2,arg3){var e;e=void 0;try{iframe_msg_host_lib||(iframe_msg_host_lib=dom.msghost)}catch(_error){e=_error,iframe_msg_host_lib=null}if(win===top)return methName&&iframe_msg_host_lib&&iframe_msg_host_lib[methName]&&iframe_msg_host_lib[methName](arg1,arg2,arg3)
},doc=function(el){var e,localD;localD=null;try{el&&(localD=9===el.nodeType?el:el.document||el.ownerDocument||null)}catch(_error){e=_error,localD=null}return localD},view=function(el){var e,localD,prop1,prop2,w;w=null,localD=void 0,prop1="parentWindow",prop2="defaultView";try{el&&(w=el[prop1]||el[prop2]||null,w||(localD=doc(el),w=localD&&(localD[prop1]||localD[prop2])||null))}catch(_error){e=_error,w=null}return w},elt=function(id){var args,dc,len;return args=arguments,len=args.length,dc=void 0,dc=len>1?doc(args[1]):theDocument,dc&&dc.getElementById(id)||null},tagName=function(el){return el&&1===el.nodeType&&el.tagName.toLowerCase()||""},tags=function(name,parNode){var e,ret;ret=[],e=void 0;try{ret=parNode&&parNode.getElementsByTagName?parNode.getElementsByTagName(name)||ret:theDocument.getElementsByTagName(name)||ret}catch(_error){e=_error,ret=[]}return ret},par=function(el){return el&&(el.parentNode||el.parentElement)},attr=function(el,attrName,attrVal){var e;e=void 0;try{arguments.length>2?null===attrVal?useOldStyleAttrMethods?el.removeAttribute(attrName,0):el.removeAttribute(attrName):(attrVal=_cstr(attrVal),"class"===attrName.toLowerCase()?el.className=attrVal:useOldStyleAttrMethods?el.setAttribute(attrName,attrVal,0):el.setAttribute(attrName,attrVal)):attrVal=_cstr(useOldStyleAttrMethods?el.getAttribute(attrName,0):el.getAttribute(attrName))}catch(_error){e=_error,attrVal=""}return attrVal},css=function(el,val){var e,st;st=void 0;try{st=el.style,arguments.length>1?st.cssText=_cstr(val):val=st.cssText}catch(_error){e=_error,val=""}return val},make_element=function(tagName,par){return(arguments.length>1&&doc(par)||theDocument).createElement(tagName)},append=function(parNode,child){var e,success;success=!1,e=void 0;try{parNode&&(success=parNode.appendChild(child))}catch(_error){e=_error,success=!1}return success},purge=function(node){var e,isIFrame,parNode,success;success=!1,parNode=void 0,isIFrame=tagName(node)===IFRAME,e=void 0,isIFrame&&(_call_xmsg_host("detach",node),_unbind_iframe_onload(node),isIE||attr(node,"src",BLANK_URL));try{parNode=par(node),parNode&&(parNode.removeChild(node),success=!0,isIE&&isIFrame&&gc())}catch(_error){}return node=parNode=null,success},attach=function(obj,name,cb){try{use_ie_old_attach?obj[use_attach]("on"+name,cb):obj[use_attach](name,cb,!1)}catch(_error){}obj=cb=null},detach=function(obj,name,cb){try{use_ie_old_attach?obj.detachEvent("on"+name,cb):obj.removeEventListener(name,cb,!1)}catch(_error){}obj=cb=null},ready=function(){var rs;return rs=void 0,_clear_ready_timer_check(),dom_is_ready?(dom_last_known_child_node=null,!0):(rs=theDocument.readyState,rs&&(dom_last_known_child_node=null,dom_is_ready="loaded"===rs||"complete"===rs?!0:!1),dom_last_known_child_node=null,dom_ready_chk_tries=dom_last_known_tag_count=0,_ready_state_check(),!!dom_is_ready)},wait=function(cb){var e,rdy;if(rdy=ready(),e=void 0,rdy)try{lang.callable(cb)&&cb()}catch(_error){e=_error,e=null}else setTimeout(function(){wait(cb),cb=null},dom_ready_chk_try_interval+1)},evtCncl=function(evt){var e,prop;if(prop="",e=void 0,evt=evt||win.event){try{evt.returnValue=!1}catch(_error){}try{evt.cancelBubble=!0}catch(_error){}try{evt.stopped=!0}catch(_error){}for(prop in EVT_CNCL_METHODS)if(EVT_CNCL_METHODS[prop])try{evt[prop]()}catch(_error){}}return!1},evtTgt=function(evt){var e,tgt;tgt=null;try{evt=evt||win.event,tgt=evt?evt[evt_tgt_prop_a]||evt[evt_tgt_prop_b]:null}catch(_error){e=_error,tgt=null}return tgt},clone_iframe=function(el,attrs,cssText,cb,xmsgCB){return _clone_iframe(el,attrs,cssText,cb,xmsgCB)},_clone_iframe=function(el,attrs,cssText,cb,xmsgCB,iframe_skip_clone){var attrStr,bufferHTML,cl,html,newCl,prop,temp,xmsgPipe;if(bufferHTML=["<",IFRAME," "],xmsgPipe="",prop=void 0,temp=void 0,cl=void 0,newCl=void 0,html=void 0,attrStr=void 0,iframe_skip_clone)cl=el;else{if(el=_byID(el),tagName(el)!==IFRAME)return null;cl=el.cloneNode(!1)}attrs=attrs||{},"src"in attrs?attr(cl,"src",null):attrs.src=attr(el,"src")||BLANK_URL,"name"in attrs?attr(cl,"name",null):attrs.name=attr(el,"name"),attrs.src||(attrs.src=BLANK_URL),xmsgPipe=xmsgCB&&_call_xmsg_host("prep",attrs),iframe_skip_clone||(attr(cl,"width",null),attr(cl,"height",null)),cssText&&(temp=css(cl),temp&&";"!==temp.charAt(temp.length-1)&&(temp+=";"),css(cl,[temp,_cstr(cssText)])),temp=make_element("div"),append(temp,cl),html=temp.innerHTML,attrStr=html.replace(/<iframe(.*?)>(.*?)<\/iframe>/g,"$1"),bufferHTML.push('name="',attrs.name,'" ',attrStr,"></",IFRAME,">"),delete attrs.name,temp.innerHTML=_cstr(bufferHTML),newCl=temp.firstChild;for(prop in attrs)attr(newCl,prop,attrs[prop]);return attr(newCl,"id")||(attr(newCl,"id","sf_"+IFRAME+"_"+iframe_next_id),iframe_next_id++),attr(newCl,"FRAMEBORDER","no"),attr(newCl,"SCROLLING","no"),attr(newCl,"ALLOWTRANSPARENCY",!0),attr(newCl,"HIDEFOCUS",!0),attr(newCl,"TABINDEX",-1),attr(newCl,"MARGINWIDTH",0),attr(newCl,"MARGINHEIGHT",0),_bind_iframe_onload(newCl,cb),xmsgPipe&&_call_xmsg_host("attach",newCl,xmsgPipe,xmsgCB),xmsgPipe=xmsgCB=cl=cb=el=temp=null,newCl},make_iframe=function(attrs,cssText,cb,xmsgCB){return _clone_iframe(make_element(IFRAME),attrs,cssText,cb,xmsgCB,!0)},replace_iframe=function(attrs,cssText,parRef,cb,xmsgCB){var cl,e,el,elID,frameEl,parNode,tgn;cl=void 0,el=void 0,frameEl=void 0,elID=void 0,tgn=void 0,parNode=void 0,e=void 0,attrs=attrs||{},elID=attrs.id,el=elID&&_byID(elID),tgn=tagName(el),el=tgn?el:null,frameEl=tgn===IFRAME?el:null,frameEl?(_call_xmsg_host("detach",frameEl),_unbind_iframe_onload(frameEl),parNode=par(frameEl),cl=clone_iframe(frameEl,attrs,cssText,cb,xmsgCB),attr(cl,"onload",null),attr(cl,"onreadystatechange",null)):(parRef&&(parRef=_byID(parRef),tagName(parRef)&&(parNode=parRef)),!parNode&&el&&(parNode=par(el)),cssText=_cstr(cssText)||css(el)||"",cl=make_iframe(attrs,cssText,cb,xmsgCB));try{parNode?frameEl?parNode.replaceChild(cl,frameEl):el?parNode.replaceChild(cl,el):append(parNode,cl):append(theDocument.body,cl)}catch(_error){}return cl=el=attrs=frameEl=parNode=cb=null,elt(elID)},iframe_view=function(el){var e,elDoc,elWin,err,fe,frame,frame_list,idx,localWin;localWin=void 0,elWin=void 0,elDoc=void 0,frame_list=void 0,frame=void 0,fe=void 0,idx=0,e=void 0,err=void 0;try{if(localWin=el.contentWindow||null,!win)for(elDoc=doc(el),elWin=elDoc&&view(elDoc),frame_list=elWin&&elWin.frames||[];frame=frame_list[idx++];){try{fe=frame.frameElement}catch(_error){err=_error,fe=null}if(fe&&fe===el){localWin=frame;break}}}catch(_error){e=_error,localWin=null}return localWin},gc=_lang.noop,function(){var ATTR_NAME,CREATE_EVENT,EVT_TYPE,err,obj,prop;obj=void 0,ATTR_NAME="SCROLLING",CREATE_EVENT="createEvent",EVT_TYPE="UIEvent",prop=void 0,err=void 0,isIE?(evt_tgt_prop_a="srcElement",evt_tgt_prop_b="target",obj=make_element(IFRAME),attr(obj,ATTR_NAME,"no"),useOldStyleAttrMethods="no"!==attr(obj,ATTR_NAME),gc=GC in win?function(){gc_timer_id&&clearTimeout(gc_timer_id),gc_timer_ig(setTimeout(function(){try{win[GC]()}catch(_error){}},IE_GC_INTERVAL))}:_lang.noop):(evt_tgt_prop_a="target",evt_tgt_prop_b="currentTarget"),win[w3c_attach]&&!isIE?(use_attach=w3c_attach,use_detach=w3c_detach):isIE&&(use_ie_old_attach=!0,use_attach=ie_attach,use_detach=ie_detach),obj=null;try{obj=theDocument[CREATE_EVENT](EVT_TYPE)}catch(_error){err=_error,obj=null}if(!obj)try{obj=theDocument[CREATE_EVENT](EVT_TYPE+"s")}catch(_error){err=_error,obj=null}if(obj)for(prop in EVT_CNCL_METHODS)obj[prop]&&(EVT_CNCL_METHODS[prop]=1);return obj=null,attach(win,"load",_handle_dom_load_evt),attach(win,"DOMContentLoaded",_handle_dom_load_evt)}(),dom={doc:doc,view:view,elt:elt,tagName:tagName,tags:tags,par:par,make:make_element,css:css,attr:attr,gc:gc,append:append,purge:purge,attach:attach,detach:detach,ready:ready,wait:wait,evtCncl:evtCncl,evtTgt:evtTgt,iframes:{make:make_iframe,clone:clone_iframe,replace:replace_iframe,view:iframe_view}}}(window,lang,env)}).call(this)},{"./env":20,"./lang":21}],20:[function(require,module){(function(process){(function(){var lang,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};lang=require("./lang"),module.exports=function(window){var cached_ua,isIE,isIE11,navigator,theDocument,ua,userAgent,win;return win=window,navigator=window.navigator,theDocument=window.document,userAgent=(null!=navigator?navigator.userAgent:void 0)||"",isIE11=!window.ActiveXObject&&__indexOf.call(window,"ActiveXObject")>=0,isIE=!isIE11&&win&&__indexOf.call(win,"ActiveXObject")>=0,cached_ua=null,ua=function(){var parse_ua,_matchIt,_numberify,_testIt;return _numberify=function(s){var c;return c=0,parseFloat(s.replace(/\./g,function(){return 1===c++?"":"."}))},_matchIt=function(str,regEx,idx){var m;return m=str&&str.match(regEx),null==idx?m:m&&m[idx]||null},_testIt=function(regEx,str){return regEx.test(str)},parse_ua=function(subUA){var date,e,match,ret;if(ret={},date=new Date,!subUA&&cached_ua)return cached_ua;ret.ie=ret.opera=ret.gecko=ret.webkit=ret.safari=ret.chrome=ret.air=ret.ipod=ret.ipad=ret.iphone=ret.android=ret.webos=ret.silk=ret.nodejs=ret.phantomjs=0,ret.mobile=ret.ios=ret.os=null,ret.accel=!1,ret.caja=navigator&&navigator.cajaVersion,ret.cks=!1,subUA=subUA||userAgent||"",subUA&&(_testIt(/windows|win32/i,subUA)?ret.os="windows":_testIt(/macintosh|mac_powerpc/i,subUA)?ret.os="macintosh":_testIt(/android/i,subUA)?ret.os="android":_testIt(/symbos/i,subUA)?ret.os="symbos":_testIt(/linux/i,subUA)?ret.os="linux":_testIt(/rhino/i,subUA)&&(ret.os="rhino"),_testIt(/KHTML/,subUA)&&(ret.webkit=1),_testIt(/IEMobile|XBLWP7/,subUA)&&(ret.mobile="windows"),_testIt(/Fennec/,subUA)&&(ret.mobile="gecko"),match=_matchIt(subUA,/AppleWebKit\/([^\s]*)/,1),match&&(ret.webkit=_numberify(match),ret.safari=ret.webkit,_testIt(/PhantomJS/,subUA)&&(match=_matchIt(subUA,/PhantomJS\/([^\s]*)/,1),match&&(ret.phantomjs=_numberify(match))),_testIt(RegExp(" Mobile\\/"),subUA)||_testIt(/iPad|iPod|iPhone/,subUA)?(ret.mobile="Apple",match=_matchIt(subUA,/OS ([^\s]*)/,1),match=match&&_numberify(match.replace("_",".")),ret.ios=match,ret.ipad=ret.ipod=ret.iphone=0,match=_matchIt(subUA,/iPad|iPod|iPhone/,0),match&&(ret[match.toLowerCase()]=ret.ios)):(match=_matchIt(subUA,/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/,0),match&&(ret.mobile=match),_testIt(/webOS/,subUA)&&(ret.mobile="WebOS",match=_matchIt(subUA,/webOS\/([^\s]*);/,1),match&&(ret.webos=_numberify(match))),_testIt(RegExp(" Android"),subUA)&&(ret.mobile="Android",match=_matchIt(subUA,/Android ([^\s]*);/,1),match&&(ret.android=_numberify(match))),_testIt(/Silk/,subUA)&&(match=_matchIt(subUA,/Silk\/([^\s]*)\)/,1),match&&(ret.silk=_numberify(match)),ret.android||(ret.android=2.34,ret.os="Android"),_testIt(/Accelerated=true/,subUA)&&(ret.accel=!0))),match=subUA.match(/(Chrome|CrMo)\/([^\s]*)/),match&&match[1]&&match[2]?(ret.chrome=_numberify(match[2]),ret.safari=0,"CrMo"===match[1]&&(ret.mobile="chrome")):(match=_matchIt(subUA,/AdobeAIR\/([^\s]*)/),match&&(ret.air=match[0]))),ret.webkit||(match=_matchIt(subUA,/Opera[\s\/]([^\s]*)/,1),match?(ret.opera=_numberify(match),match=_matchIt(subUA,/Opera Mini[^;]*/,0),match&&(ret.mobile=match)):(match=_matchIt(subUA,/MSIE\s([^;]*)/,1),match?ret.ie=_numberify(match):(match=_matchIt(subUA,/Gecko\/([^\s]*)/),match&&(ret.gecko=1,match=_matchIt(subUA,/rv:([^\s\)]*)/,1),match&&(ret.gecko=_numberify(match)))))));try{date.setTime(date.getTime()+1e3),theDocument.cookie=lang.cstr(["sf_ck_tst=test; expires=",date.toGMTString(),"; path=/"]),-1!==theDocument.cookie.indexOf("sf_ck_tst")&&(ret.cks=!0)}catch(_error){e=_error,ret.cks=!1}try{"object"==typeof process&&process.versions&&process.versions.node&&(ret.os=process.platform,ret.nodejs=numberify(process.versions.node))}catch(_error){e=_error,ret.nodejs=0}return ret},cached_ua=parse_ua(),cached_ua.parse=parse_ua,cached_ua}(),{ua:ua,isIE:isIE}}(window)}).call(this)}).call(this,require("/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./lang":21,"/usr/local/lib/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":32}],21:[function(require,module,exports){(function(){module.exports=function(window){var ParamHash,backSlash,callable,cbool,cnum,cstr,def,entityMap,entityRegexes,guid,isArray,jssafe_html,keys,lang,mix,next_id,noop,ns,proto,rand,scrip_str,time,toString,trim,win,wrap,_es,_ue;return next_id=0,win=window,backSlash=String.fromCharCode(92),scrip_str='scr"+"ipt',_es=win.escape,_ue=win.unescape,noop=function(){},cstr=function(str){var typ;return typ=typeof str,"string"===typ?str:"number"!==typ||str?"object"===typ&&str&&str.join?str.join(""):"boolean"===typ?str.toString():str?String(str):"":"0"},cbool=function(val){return val&&"0"!==val&&"false"!==val&&"no"!==val&&"undefined"!==val&&"null"!==val?!0:!1},keys=function(obj){var k,_v;return("function"==typeof Object.keys?Object.keys(obj):void 0)||function(){var _results;_results=[];for(k in obj)_v=obj[k],_results.push(k);return _results}()},cnum=function(val,defVal,minVal,maxVal){var e;if("number"!=typeof val)try{val=val?parseFloat(val):Number.NaN}catch(_error){e=_error,val=Number.NaN}return null==maxVal&&(maxVal=Number.MAX_VALUE),null==minVal&&(minVal=-Number.MAX_VALUE),(isNaN(val)||minVal>val||val>maxVal)&&null!=defVal?defVal:val},callable=function(f){var e;try{f=f&&"function"==typeof f&&f.toString()&&new f.constructor?f:null}catch(_error){e=_error,f=null}return!!f},guid=function(prefix){return cstr([prefix||"","_",time(),"_",rand(),"_",next_id++])},mix=function(r,s,owned,skipFuncs,no_ovr){var item,p,typ;if(!s||!r)return r;for(p in s)item=s[p],typ=typeof item,(!owned||s.hasOwnProperty(p))&&(no_ovr&&p in r||skipFuncs&&"function"===typ||("object"===typ&&item&&(item=item.slice?mix([],item):mix({},item)),r[p]=item));return r},time=function(){return(new Date).getTime()},rand=function(){return Math.round(100*Math.random())},trim=function(str){var ret;return ret=cstr(str),ret&&ret.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},def=function(str_ns,aug,root,no_ovr){var ar,idx,item,obj,per,ret;if(obj=root&&"object"==typeof root?root:win,idx=0,per=".",ret=null,str_ns)if(str_ns=cstr(str_ns),aug=aug&&"object"==typeof aug?aug:null,str_ns.indexOf(per))for(ar=str_ns.split(per);item=ar[idx++];)item=trim(item),ret=idx===ar.length?obj[item]&&aug?obj[item]=mix(obj[item],aug,!1,null,no_ovr):no_ovr&&item in obj?obj[item]:obj[item]=obj[item]||aug||{}:no_ovr&&item in obj?obj[item]:obj[item]=obj[item]||{},obj=obj[item];else ret=obj[str_ns]=obj[str_ns]&&aug?mix(obj[str_ns],aug,!1,null,no_ovr):obj[str_ns]||aug||{};return ret},ns=function(str_ns,root){var exists,exp,exp2,exp3,exp4,idx,matches,obj,prop,rootStr;if(exp=/(\[(.{1,})\])|(\.\w+)/g,exp2=/\[(('|")?)((\s|.)*?)(('|")?)\]/g,exp3=/(\[.*)|(\..*)/g,exp4=/\./g,idx=0,rootStr="",exists=!0,obj=root=root||win,str_ns)if(str_ns=cstr(str_ns))if(str_ns=trim(str_ns),matches=str_ns.match(exp))for(rootStr=str_ns.replace(exp3,""),matches.unshift(rootStr);prop=matches[idx++];){if(prop=prop.replace(exp2,"$3").replace(exp4,""),!obj[prop]){exists=!1;break}obj=obj[prop]}else prop=str_ns,obj=obj[prop];else exists=!1;else exists=!1;return exists&&obj||!1},isArray=function(obj){return null==obj?!1:"string"==typeof obj?!1:null!=obj.length&&obj.constructor===Array?!0:!1},wrap=function(func,wrapper){return function(){var args;return args=[func],Array.prototype.push.apply(args,arguments),wrapper.apply(this,args)}},entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},entityRegexes={escape:new RegExp("["+keys(entityMap.escape).join("")+"]","g")},jssafe_html=function(str){return null==str?"":(""+string).replace(entityRegexes.escape,function(match){return entityMap.escape[match]})},ParamHash=function(sString,sPropDelim,sValueDelim,bNoOverwrite,bRecurse){var added,cnt,doAdd,idx,idx2,idx3,io,len,len2,me,nm,nv,obj,pairs,sTemp,sTemp2,sTemp3,ss;if(me=this,io="indexOf",ss="substring",doAdd=!1,!(me instanceof ParamHash))return new ParamHash(sString,sPropDelim,sValueDelim,bNoOverwrite,bRecurse);if(!arguments.length)return me;if(sString&&"object"==typeof sString)return mix(new ParamHash("",sPropDelim,sValueDelim,bNoOverwrite,bRecurse),sString);if(sString=cstr(sString),sPropDelim=cstr(sPropDelim)||"&",sValueDelim=cstr(sValueDelim)||"=",!sString)return me;if("?"!==sPropDelim&&"?"!==sValueDelim&&"?"===sString.charAt(0)&&(sString=sString[ss](1)),idx=sString[io]("?"),idx2=sString[io](sValueDelim),-1!==idx&&-1!==idx2&&idx>idx2)sTemp=_es(sString[ss](idx2+1)),sTemp2=sString.substr(0,idx2+1),sString=sTemp2+sTemp;else if(-1!==idx)return sString=sString[ss](idx+1),new ParamHash(sString,sPropDelim,sValueDelim,bNoOverwrite);for(sString.charAt(0)===sPropDelim&&(sString=sString[ss](1)),pairs=sString.split(sPropDelim),cnt=pairs.length,idx=0;cnt--;)if(sTemp=pairs[idx++],added=!1,doAdd=!1,sTemp){if(nv=sTemp.split(sValueDelim),len=nv.length,len>2){if(nm=_ue(nv[0]),nv.shift(),bRecurse)if(sTemp2=nm+sValueDelim,idx2=sString[io](sTemp2),len=sTemp2[LEN],sTemp3=sString[ss](idx2+len),sTemp2=sPropDelim+sPropDelim,len2=sTemp2[LEN],idx3=sTemp3[io](sTemp2),-1!==idx3){sTemp3=sString.substr(idx2+len,idx3+len2),obj=new ParamHash(sTemp3,sPropDelim,sValueDelim,bNoOverwrite,bRecurse),sTemp3="",len=0;for(sTemp3 in obj);len>0&&(idx+=len-1),sTemp=obj}else sTemp=_ue(nv.join(sValueDelim));else sTemp=_ue(nv.join(sValueDelim));doAdd=!0}else 2===len&&(nm=_ue(nv[0]),sTemp=_ue(nv[1]),doAdd=!0);doAdd&&(bNoOverwrite?nm in me||(me[nm]=sTemp,added=!0):(me[nm]=sTemp,added=!0),bRecurse&&added&&nm&&sTemp&&"object"!=typeof sTemp&&(sTemp[io](sPropDelim)>=0||sTemp[io](sValueDelim)>=0)&&(me[nm]=new ParamHash(sTemp,sPropDelim,sValueDelim,bNoOverwrite,bRecurse)))}},toString=function(sPropDelim,sValueDelim,escapeProp,dontEscapeValue){var buffer,item,itemType,me,prop;prop=void 0,buffer=[],me=this,itemType=void 0,item=void 0,sPropDelim=sPropDelim||"&",sValueDelim=sValueDelim||"=";for(prop in me)item=me[prop],itemType=typeof item,item&&"function"===itemType||(item&&"object"===itemType&&(item=toString.apply(item,[sPropDelim,sValueDelim,escapeProp,dontEscapeValue])),escapeProp&&(prop=_es(prop)),dontEscapeValue||(item=_es(item)),buffer.push(prop,sValueDelim,item,sPropDelim));return cstr(buffer)},proto=ParamHash.prototype,String.prototype.trim||(String.prototype.trim=trim),proto.toString=proto.valueOf=toString,lang={ParamHash:ParamHash,cstr:cstr,cnum:cnum,cbool:cbool,noop:noop,trim:trim,callable:callable,guid:guid,mix:mix,time:time,rand:rand,def:def,ns:ns,jssafe_html:jssafe_html,isArray:isArray,wrap:wrap,keys:keys},"undefined"!=typeof exports&&null!==exports?exports.lang=lang:lang}(window)}).call(this)},{}],22:[function(require,module){(function(){module.exports=function(window){var logError,logInfo,win;return win=window,logInfo=function(message){win.console&&console.log&&console.log(message)},logError=function(message){win.console&&console.error?console.error(message):win.console&&console.log&&console.log(message)},{info:logInfo,error:logError}}(window)}).call(this)},{}],23:[function(require,module,exports){function Buffer(subject,encoding,noZero){if(!(this instanceof Buffer))return new Buffer(subject,encoding,noZero);var type=typeof subject;if("base64"===encoding&&"string"===type)for(subject=stringtrim(subject);subject.length%4!==0;)subject+="=";var length;if("number"===type)length=coerce(subject);else if("string"===type)length=Buffer.byteLength(subject,encoding);else{if("object"!==type)throw new Error("First argument needs to be a number, array or string.");length=coerce(subject.length)}var buf;Buffer._useTypedArrays?buf=augment(new Uint8Array(length)):(buf=this,buf.length=length,buf._isBuffer=!0);var i;if(Buffer._useTypedArrays&&"function"==typeof Uint8Array&&subject instanceof Uint8Array)buf._set(subject);else if(isArrayish(subject))for(i=0;length>i;i++)buf[i]=Buffer.isBuffer(subject)?subject.readUInt8(i):subject[i];else if("string"===type)buf.write(subject,0,encoding);else if("number"===type&&!Buffer._useTypedArrays&&!noZero)for(i=0;length>i;i++)buf[i]=0;return buf}function _hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining;var strLen=string.length;assert(strLen%2===0,"Invalid hex string"),length>strLen/2&&(length=strLen/2);for(var i=0;length>i;i++){var byte=parseInt(string.substr(2*i,2),16);assert(!isNaN(byte),"Invalid hex string"),buf[offset+i]=byte}return Buffer._charsWritten=2*i,i}function _utf8Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(utf8ToBytes(string),buf,offset,length);return charsWritten}function _asciiWrite(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(asciiToBytes(string),buf,offset,length);return charsWritten}function _binaryWrite(buf,string,offset,length){return _asciiWrite(buf,string,offset,length)}function _base64Write(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(base64ToBytes(string),buf,offset,length);return charsWritten}function _utf16leWrite(buf,string,offset,length){var charsWritten=Buffer._charsWritten=blitBuffer(utf16leToBytes(string),buf,offset,length);return charsWritten}function _base64Slice(buf,start,end){return base64.fromByteArray(0===start&&end===buf.length?buf:buf.slice(start,end))}function _utf8Slice(buf,start,end){var res="",tmp="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)buf[i]<=127?(res+=decodeUtf8Char(tmp)+String.fromCharCode(buf[i]),tmp=""):tmp+="%"+buf[i].toString(16);return res+decodeUtf8Char(tmp)}function _asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;end>i;i++)ret+=String.fromCharCode(buf[i]);return ret}function _binarySlice(buf,start,end){return _asciiSlice(buf,start,end)}function _hexSlice(buf,start,end){var len=buf.length;(!start||0>start)&&(start=0),(!end||0>end||end>len)&&(end=len);for(var out="",i=start;end>i;i++)out+=toHex(buf[i]);return out}function _utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function _readUInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(val=buf[offset],len>offset+1&&(val|=buf[offset+1]<<8)):(val=buf[offset]<<8,len>offset+1&&(val|=buf[offset+1])),val}}function _readUInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val;return littleEndian?(len>offset+2&&(val=buf[offset+2]<<16),len>offset+1&&(val|=buf[offset+1]<<8),val|=buf[offset],len>offset+3&&(val+=buf[offset+3]<<24>>>0)):(len>offset+1&&(val=buf[offset+1]<<16),len>offset+2&&(val|=buf[offset+2]<<8),len>offset+3&&(val|=buf[offset+3]),val+=buf[offset]<<24>>>0),val}}function _readInt16(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=_readUInt16(buf,offset,littleEndian,!0),neg=32768&val;return neg?-1*(65535-val+1):val}}function _readInt32(buf,offset,littleEndian,noAssert){noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to read beyond buffer length"));var len=buf.length;if(!(offset>=len)){var val=_readUInt32(buf,offset,littleEndian,!0),neg=2147483648&val;return neg?-1*(4294967295-val+1):val}}function _readFloat(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+3<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,23,4)}function _readDouble(buf,offset,littleEndian,noAssert){return noAssert||(assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(offset+7<buf.length,"Trying to read beyond buffer length")),ieee754.read(buf,offset,littleEndian,52,8)}function _writeUInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"trying to write beyond buffer length"),verifuint(value,65535));var len=buf.length;if(!(offset>=len))for(var i=0,j=Math.min(len-offset,2);j>i;i++)buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>8*(littleEndian?i:1-i)}function _writeUInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"trying to write beyond buffer length"),verifuint(value,4294967295));var len=buf.length;if(!(offset>=len))for(var i=0,j=Math.min(len-offset,4);j>i;i++)buf[offset+i]=value>>>8*(littleEndian?i:3-i)&255}function _writeInt16(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+1<buf.length,"Trying to write beyond buffer length"),verifsint(value,32767,-32768));var len=buf.length;offset>=len||(value>=0?_writeUInt16(buf,value,offset,littleEndian,noAssert):_writeUInt16(buf,65535+value+1,offset,littleEndian,noAssert))}function _writeInt32(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifsint(value,2147483647,-2147483648));var len=buf.length;offset>=len||(value>=0?_writeUInt32(buf,value,offset,littleEndian,noAssert):_writeUInt32(buf,4294967295+value+1,offset,littleEndian,noAssert))}function _writeFloat(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+3<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,3.4028234663852886e38,-3.4028234663852886e38));var len=buf.length;offset>=len||ieee754.write(buf,value,offset,littleEndian,23,4)}function _writeDouble(buf,value,offset,littleEndian,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert("boolean"==typeof littleEndian,"missing or invalid endian"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset+7<buf.length,"Trying to write beyond buffer length"),verifIEEE754(value,1.7976931348623157e308,-1.7976931348623157e308));var len=buf.length;offset>=len||ieee754.write(buf,value,offset,littleEndian,52,8)}function stringtrim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function augment(arr){return arr._isBuffer=!0,arr._get=arr.get,arr._set=arr.set,arr.get=BP.get,arr.set=BP.set,arr.write=BP.write,arr.toString=BP.toString,arr.toLocaleString=BP.toString,arr.toJSON=BP.toJSON,arr.copy=BP.copy,arr.slice=BP.slice,arr.readUInt8=BP.readUInt8,arr.readUInt16LE=BP.readUInt16LE,arr.readUInt16BE=BP.readUInt16BE,arr.readUInt32LE=BP.readUInt32LE,arr.readUInt32BE=BP.readUInt32BE,arr.readInt8=BP.readInt8,arr.readInt16LE=BP.readInt16LE,arr.readInt16BE=BP.readInt16BE,arr.readInt32LE=BP.readInt32LE,arr.readInt32BE=BP.readInt32BE,arr.readFloatLE=BP.readFloatLE,arr.readFloatBE=BP.readFloatBE,arr.readDoubleLE=BP.readDoubleLE,arr.readDoubleBE=BP.readDoubleBE,arr.writeUInt8=BP.writeUInt8,arr.writeUInt16LE=BP.writeUInt16LE,arr.writeUInt16BE=BP.writeUInt16BE,arr.writeUInt32LE=BP.writeUInt32LE,arr.writeUInt32BE=BP.writeUInt32BE,arr.writeInt8=BP.writeInt8,arr.writeInt16LE=BP.writeInt16LE,arr.writeInt16BE=BP.writeInt16BE,arr.writeInt32LE=BP.writeInt32LE,arr.writeInt32BE=BP.writeInt32BE,arr.writeFloatLE=BP.writeFloatLE,arr.writeFloatBE=BP.writeFloatBE,arr.writeDoubleLE=BP.writeDoubleLE,arr.writeDoubleBE=BP.writeDoubleBE,arr.fill=BP.fill,arr.inspect=BP.inspect,arr.toArrayBuffer=BP.toArrayBuffer,arr}function clamp(index,len,defaultValue){return"number"!=typeof index?defaultValue:(index=~~index,index>=len?len:index>=0?index:(index+=len,index>=0?index:0))}function coerce(length){return length=~~Math.ceil(+length),0>length?0:length}function isArray(subject){return(Array.isArray||function(subject){return"[object Array]"===Object.prototype.toString.call(subject)})(subject)}function isArrayish(subject){return isArray(subject)||Buffer.isBuffer(subject)||subject&&"object"==typeof subject&&"number"==typeof subject.length}function toHex(n){return 16>n?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(str){for(var byteArray=[],i=0;i<str.length;i++){var b=str.charCodeAt(i);if(127>=b)byteArray.push(str.charCodeAt(i));else{var start=i;b>=55296&&57343>=b&&i++;for(var h=encodeURIComponent(str.slice(start,i+1)).substr(1).split("%"),j=0;j<h.length;j++)byteArray.push(parseInt(h[j],16))}}return byteArray}function asciiToBytes(str){for(var byteArray=[],i=0;i<str.length;i++)byteArray.push(255&str.charCodeAt(i));return byteArray}function utf16leToBytes(str){for(var c,hi,lo,byteArray=[],i=0;i<str.length;i++)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}function base64ToBytes(str){return base64.toByteArray(str)}function blitBuffer(src,dst,offset,length){for(var i=0;length>i&&!(i+offset>=dst.length||i>=src.length);i++)dst[i+offset]=src[i];return i}function decodeUtf8Char(str){try{return decodeURIComponent(str)}catch(err){return String.fromCharCode(65533)}}function verifuint(value,max){assert("number"==typeof value,"cannot write a non-number as a number"),assert(value>=0,"specified a negative value for writing an unsigned value"),assert(max>=value,"value is larger than maximum value for type"),assert(Math.floor(value)===value,"value has a fractional component")}function verifsint(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value"),assert(Math.floor(value)===value,"value has a fractional component")}function verifIEEE754(value,max,min){assert("number"==typeof value,"cannot write a non-number as a number"),assert(max>=value,"value larger than maximum allowed value"),assert(value>=min,"value smaller than minimum allowed value")}function assert(test,message){if(!test)throw new Error(message||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var arr=new Uint8Array(0);return arr.foo=function(){return 42},42===arr.foo()&&"function"==typeof arr.subarray}catch(e){return!1}}(),Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(b){return!(null===b||void 0===b||!b._isBuffer)},Buffer.byteLength=function(str,encoding){var ret;switch(str+="",encoding||"utf8"){case"hex":ret=str.length/2;break;case"utf8":case"utf-8":ret=utf8ToBytes(str).length;break;case"ascii":case"binary":case"raw":ret=str.length;
break;case"base64":ret=base64ToBytes(str).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=2*str.length;break;default:throw new Error("Unknown encoding")}return ret},Buffer.concat=function(list,totalLength){if(assert(isArray(list),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===list.length)return new Buffer(0);if(1===list.length)return list[0];var i;if("number"!=typeof totalLength)for(totalLength=0,i=0;i<list.length;i++)totalLength+=list[i].length;var buf=new Buffer(totalLength),pos=0;for(i=0;i<list.length;i++){var item=list[i];item.copy(buf,pos),pos+=item.length}return buf},Buffer.prototype.write=function(string,offset,length,encoding){if(isFinite(offset))isFinite(length)||(encoding=length,length=void 0);else{var swap=encoding;encoding=offset,offset=length,length=swap}offset=Number(offset)||0;var remaining=this.length-offset;length?(length=Number(length),length>remaining&&(length=remaining)):length=remaining,encoding=String(encoding||"utf8").toLowerCase();var ret;switch(encoding){case"hex":ret=_hexWrite(this,string,offset,length);break;case"utf8":case"utf-8":ret=_utf8Write(this,string,offset,length);break;case"ascii":ret=_asciiWrite(this,string,offset,length);break;case"binary":ret=_binaryWrite(this,string,offset,length);break;case"base64":ret=_base64Write(this,string,offset,length);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=_utf16leWrite(this,string,offset,length);break;default:throw new Error("Unknown encoding")}return ret},Buffer.prototype.toString=function(encoding,start,end){var self=this;if(encoding=String(encoding||"utf8").toLowerCase(),start=Number(start)||0,end=void 0!==end?Number(end):end=self.length,end===start)return"";var ret;switch(encoding){case"hex":ret=_hexSlice(self,start,end);break;case"utf8":case"utf-8":ret=_utf8Slice(self,start,end);break;case"ascii":ret=_asciiSlice(self,start,end);break;case"binary":ret=_binarySlice(self,start,end);break;case"base64":ret=_base64Slice(self,start,end);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ret=_utf16leSlice(self,start,end);break;default:throw new Error("Unknown encoding")}return ret},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.copy=function(target,target_start,start,end){var source=this;if(start||(start=0),end||0===end||(end=this.length),target_start||(target_start=0),end!==start&&0!==target.length&&0!==source.length){assert(end>=start,"sourceEnd < sourceStart"),assert(target_start>=0&&target_start<target.length,"targetStart out of bounds"),assert(start>=0&&start<source.length,"sourceStart out of bounds"),assert(end>=0&&end<=source.length,"sourceEnd out of bounds"),end>this.length&&(end=this.length),target.length-target_start<end-start&&(end=target.length-target_start+start);for(var i=0;end-start>i;i++)target[i+target_start]=this[i+start]}},Buffer.prototype.slice=function(start,end){var len=this.length;if(start=clamp(start,len,0),end=clamp(end,len,len),Buffer._useTypedArrays)return augment(this.subarray(start,end));for(var sliceLen=end-start,newBuf=new Buffer(sliceLen,void 0,!0),i=0;sliceLen>i;i++)newBuf[i]=this[i+start];return newBuf},Buffer.prototype.get=function(offset){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(offset)},Buffer.prototype.set=function(v,offset){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(v,offset)},Buffer.prototype.readUInt8=function(offset,noAssert){return noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),offset>=this.length?void 0:this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return _readUInt16(this,offset,!0,noAssert)},Buffer.prototype.readUInt16BE=function(offset,noAssert){return _readUInt16(this,offset,!1,noAssert)},Buffer.prototype.readUInt32LE=function(offset,noAssert){return _readUInt32(this,offset,!0,noAssert)},Buffer.prototype.readUInt32BE=function(offset,noAssert){return _readUInt32(this,offset,!1,noAssert)},Buffer.prototype.readInt8=function(offset,noAssert){if(noAssert||(assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to read beyond buffer length")),!(offset>=this.length)){var neg=128&this[offset];return neg?-1*(255-this[offset]+1):this[offset]}},Buffer.prototype.readInt16LE=function(offset,noAssert){return _readInt16(this,offset,!0,noAssert)},Buffer.prototype.readInt16BE=function(offset,noAssert){return _readInt16(this,offset,!1,noAssert)},Buffer.prototype.readInt32LE=function(offset,noAssert){return _readInt32(this,offset,!0,noAssert)},Buffer.prototype.readInt32BE=function(offset,noAssert){return _readInt32(this,offset,!1,noAssert)},Buffer.prototype.readFloatLE=function(offset,noAssert){return _readFloat(this,offset,!0,noAssert)},Buffer.prototype.readFloatBE=function(offset,noAssert){return _readFloat(this,offset,!1,noAssert)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return _readDouble(this,offset,!0,noAssert)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return _readDouble(this,offset,!1,noAssert)},Buffer.prototype.writeUInt8=function(value,offset,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"trying to write beyond buffer length"),verifuint(value,255)),offset>=this.length||(this[offset]=value)},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){_writeUInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){_writeUInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){_writeUInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){_writeUInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt8=function(value,offset,noAssert){noAssert||(assert(void 0!==value&&null!==value,"missing value"),assert(void 0!==offset&&null!==offset,"missing offset"),assert(offset<this.length,"Trying to write beyond buffer length"),verifsint(value,127,-128)),offset>=this.length||(value>=0?this.writeUInt8(value,offset,noAssert):this.writeUInt8(255+value+1,offset,noAssert))},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){_writeInt16(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){_writeInt16(this,value,offset,!1,noAssert)},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){_writeInt32(this,value,offset,!0,noAssert)},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){_writeInt32(this,value,offset,!1,noAssert)},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){_writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){_writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){_writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){_writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.fill=function(value,start,end){if(value||(value=0),start||(start=0),end||(end=this.length),"string"==typeof value&&(value=value.charCodeAt(0)),assert("number"==typeof value&&!isNaN(value),"value is not a number"),assert(end>=start,"end < start"),end!==start&&0!==this.length){assert(start>=0&&start<this.length,"start out of bounds"),assert(end>=0&&end<=this.length,"end out of bounds");for(var i=start;end>i;i++)this[i]=value}},Buffer.prototype.inspect=function(){for(var out=[],len=this.length,i=0;len>i;i++)if(out[i]=toHex(this[i]),i===exports.INSPECT_MAX_BYTES){out[i+1]="...";break}return"<Buffer "+out.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var buf=new Uint8Array(this.length),i=0,len=buf.length;len>i;i+=1)buf[i]=this[i];return buf.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype},{"base64-js":24,ieee754:25}],24:[function(require,module){var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function decode(elt){var code=elt.charCodeAt(0);return code===PLUS?62:code===SLASH?63:NUMBER>code?-1:NUMBER+10>code?code-NUMBER+26+26:UPPER+26>code?code-UPPER:LOWER+26>code?code-LOWER+26:void 0}function b64ToByteArray(b64){function push(v){arr[L++]=v}var i,j,l,tmp,placeHolders,arr;if(b64.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var len=b64.length;placeHolders="="===b64.charAt(len-2)?2:"="===b64.charAt(len-1)?1:0,arr=new Arr(3*b64.length/4-placeHolders),l=placeHolders>0?b64.length-4:b64.length;var L=0;for(i=0,j=0;l>i;i+=4,j+=3)tmp=decode(b64.charAt(i))<<18|decode(b64.charAt(i+1))<<12|decode(b64.charAt(i+2))<<6|decode(b64.charAt(i+3)),push((16711680&tmp)>>16),push((65280&tmp)>>8),push(255&tmp);return 2===placeHolders?(tmp=decode(b64.charAt(i))<<2|decode(b64.charAt(i+1))>>4,push(255&tmp)):1===placeHolders&&(tmp=decode(b64.charAt(i))<<10|decode(b64.charAt(i+1))<<4|decode(b64.charAt(i+2))>>2,push(tmp>>8&255),push(255&tmp)),arr}function uint8ToBase64(uint8){function encode(num){return lookup.charAt(num)}function tripletToBase64(num){return encode(num>>18&63)+encode(num>>12&63)+encode(num>>6&63)+encode(63&num)}var i,temp,length,extraBytes=uint8.length%3,output="";for(i=0,length=uint8.length-extraBytes;length>i;i+=3)temp=(uint8[i]<<16)+(uint8[i+1]<<8)+uint8[i+2],output+=tripletToBase64(temp);switch(extraBytes){case 1:temp=uint8[uint8.length-1],output+=encode(temp>>2),output+=encode(temp<<4&63),output+="==";break;case 2:temp=(uint8[uint8.length-2]<<8)+uint8[uint8.length-1],output+=encode(temp>>10),output+=encode(temp>>4&63),output+=encode(temp<<2&63),output+="="}return output}var Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,PLUS=("0".charCodeAt(0),"+".charCodeAt(0)),SLASH="/".charCodeAt(0),NUMBER="0".charCodeAt(0),LOWER="a".charCodeAt(0),UPPER="A".charCodeAt(0);module.exports.toByteArray=b64ToByteArray,module.exports.fromByteArray=uint8ToBase64}()},{}],25:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?0/0:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=0>value||0===value&&0>1/value?1:0;for(value=Math.abs(value),isNaN(value)||1/0===value?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias),value*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],26:[function(require,module){function toArray(buf,bigEndian){if(buf.length%intSize!==0){var len=buf.length+(intSize-buf.length%intSize);buf=Buffer.concat([buf,zeroBuffer],len)}for(var arr=[],fn=bigEndian?buf.readInt32BE:buf.readInt32LE,i=0;i<buf.length;i+=intSize)arr.push(fn.call(buf,i));return arr}function toBuffer(arr,size,bigEndian){for(var buf=new Buffer(size),fn=bigEndian?buf.writeInt32BE:buf.writeInt32LE,i=0;i<arr.length;i++)fn.call(buf,arr[i],4*i,!0);return buf}function hash(buf,fn,hashSize,bigEndian){Buffer.isBuffer(buf)||(buf=new Buffer(buf));var arr=fn(toArray(buf,bigEndian),buf.length*chrsz);return toBuffer(arr,hashSize,bigEndian)}var Buffer=require("buffer").Buffer,intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash}},{buffer:23}],27:[function(require,module,exports){function hmac(fn,key,data){Buffer.isBuffer(key)||(key=new Buffer(key)),Buffer.isBuffer(data)||(data=new Buffer(data)),key.length>blocksize?key=fn(key):key.length<blocksize&&(key=Buffer.concat([key,zeroBuffer],blocksize));for(var ipad=new Buffer(blocksize),opad=new Buffer(blocksize),i=0;blocksize>i;i++)ipad[i]=54^key[i],opad[i]=92^key[i];var hash=fn(Buffer.concat([ipad,data]));return fn(Buffer.concat([opad,hash]))}function hash(alg,key){alg=alg||"sha1";var fn=algorithms[alg],bufs=[],length=0;return fn||error("algorithm:",alg,"is not yet supported"),{update:function(data){return Buffer.isBuffer(data)||(data=new Buffer(data)),bufs.push(data),length+=data.length,this},digest:function(enc){var buf=Buffer.concat(bufs),r=key?hmac(fn,key,buf):fn(buf);return bufs=null,enc?r.toString(enc):r}}}function error(){var m=[].slice.call(arguments).join(" ");throw new Error([m,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(a,f){for(var i in a)f(a[i],i)}var Buffer=require("buffer").Buffer,sha=require("./sha"),sha256=require("./sha256"),rng=require("./rng"),md5=require("./md5"),algorithms={sha1:sha,sha256:sha256,md5:md5},blocksize=64,zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),exports.createHash=function(alg){return hash(alg)},exports.createHmac=function(alg,key){return hash(alg,key)},exports.randomBytes=function(size,callback){if(!callback||!callback.call)return new Buffer(rng(size));try{callback.call(this,void 0,new Buffer(rng(size)))}catch(err){callback(err)}},each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(name){exports[name]=function(){error("sorry,",name,"is not implemented yet")}})},{"./md5":28,"./rng":29,"./sha":30,"./sha256":31,buffer:23}],28:[function(require,module){function core_md5(x,len){x[len>>5]|=128<<len%32,x[(len+64>>>9<<4)+14]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936),d=md5_ff(d,a,b,c,x[i+1],12,-389564586),c=md5_ff(c,d,a,b,x[i+2],17,606105819),b=md5_ff(b,c,d,a,x[i+3],22,-1044525330),a=md5_ff(a,b,c,d,x[i+4],7,-176418897),d=md5_ff(d,a,b,c,x[i+5],12,1200080426),c=md5_ff(c,d,a,b,x[i+6],17,-1473231341),b=md5_ff(b,c,d,a,x[i+7],22,-45705983),a=md5_ff(a,b,c,d,x[i+8],7,1770035416),d=md5_ff(d,a,b,c,x[i+9],12,-1958414417),c=md5_ff(c,d,a,b,x[i+10],17,-42063),b=md5_ff(b,c,d,a,x[i+11],22,-1990404162),a=md5_ff(a,b,c,d,x[i+12],7,1804603682),d=md5_ff(d,a,b,c,x[i+13],12,-40341101),c=md5_ff(c,d,a,b,x[i+14],17,-1502002290),b=md5_ff(b,c,d,a,x[i+15],22,1236535329),a=md5_gg(a,b,c,d,x[i+1],5,-165796510),d=md5_gg(d,a,b,c,x[i+6],9,-1069501632),c=md5_gg(c,d,a,b,x[i+11],14,643717713),b=md5_gg(b,c,d,a,x[i+0],20,-373897302),a=md5_gg(a,b,c,d,x[i+5],5,-701558691),d=md5_gg(d,a,b,c,x[i+10],9,38016083),c=md5_gg(c,d,a,b,x[i+15],14,-660478335),b=md5_gg(b,c,d,a,x[i+4],20,-405537848),a=md5_gg(a,b,c,d,x[i+9],5,568446438),d=md5_gg(d,a,b,c,x[i+14],9,-1019803690),c=md5_gg(c,d,a,b,x[i+3],14,-187363961),b=md5_gg(b,c,d,a,x[i+8],20,1163531501),a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),d=md5_gg(d,a,b,c,x[i+2],9,-51403784),c=md5_gg(c,d,a,b,x[i+7],14,1735328473),b=md5_gg(b,c,d,a,x[i+12],20,-1926607734),a=md5_hh(a,b,c,d,x[i+5],4,-378558),d=md5_hh(d,a,b,c,x[i+8],11,-2022574463),c=md5_hh(c,d,a,b,x[i+11],16,1839030562),b=md5_hh(b,c,d,a,x[i+14],23,-35309556),a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),d=md5_hh(d,a,b,c,x[i+4],11,1272893353),c=md5_hh(c,d,a,b,x[i+7],16,-155497632),b=md5_hh(b,c,d,a,x[i+10],23,-1094730640),a=md5_hh(a,b,c,d,x[i+13],4,681279174),d=md5_hh(d,a,b,c,x[i+0],11,-358537222),c=md5_hh(c,d,a,b,x[i+3],16,-722521979),b=md5_hh(b,c,d,a,x[i+6],23,76029189),a=md5_hh(a,b,c,d,x[i+9],4,-640364487),d=md5_hh(d,a,b,c,x[i+12],11,-421815835),c=md5_hh(c,d,a,b,x[i+15],16,530742520),b=md5_hh(b,c,d,a,x[i+2],23,-995338651),a=md5_ii(a,b,c,d,x[i+0],6,-198630844),d=md5_ii(d,a,b,c,x[i+7],10,1126891415),c=md5_ii(c,d,a,b,x[i+14],15,-1416354905),b=md5_ii(b,c,d,a,x[i+5],21,-57434055),a=md5_ii(a,b,c,d,x[i+12],6,1700485571),d=md5_ii(d,a,b,c,x[i+3],10,-1894986606),c=md5_ii(c,d,a,b,x[i+10],15,-1051523),b=md5_ii(b,c,d,a,x[i+1],21,-2054922799),a=md5_ii(a,b,c,d,x[i+8],6,1873313359),d=md5_ii(d,a,b,c,x[i+15],10,-30611744),c=md5_ii(c,d,a,b,x[i+6],15,-1560198380),b=md5_ii(b,c,d,a,x[i+13],21,1309151649),a=md5_ii(a,b,c,d,x[i+4],6,-145523070),d=md5_ii(d,a,b,c,x[i+11],10,-1120210379),c=md5_ii(c,d,a,b,x[i+2],15,718787259),b=md5_ii(b,c,d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}var helpers=require("./helpers");module.exports=function(buf){return helpers.hash(buf,core_md5,16)}},{"./helpers":26}],29:[function(require,module){!function(){var mathRNG,whatwgRNG,_global=this;mathRNG=function(size){for(var r,r,bytes=new Array(size),i=0;size>i;i++)0==(3&i)&&(r=4294967296*Math.random()),bytes[i]=r>>>((3&i)<<3)&255;return bytes},_global.crypto&&crypto.getRandomValues&&(whatwgRNG=function(size){var bytes=new Uint8Array(size);return crypto.getRandomValues(bytes),bytes}),module.exports=whatwgRNG||mathRNG}()},{}],30:[function(require,module){function core_sha1(x,len){x[len>>5]|=128<<24-len%32,x[(len+64>>9<<4)+15]=len;for(var w=Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776,i=0;i<x.length;i+=16){for(var olda=a,oldb=b,oldc=c,oldd=d,olde=e,j=0;80>j;j++){w[j]=16>j?x[i+j]:rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=safe_add(safe_add(rol(a,5),sha1_ft(j,b,c,d)),safe_add(safe_add(e,w[j]),sha1_kt(j)));e=d,d=c,c=rol(b,30),b=a,a=t}a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd),e=safe_add(e,olde)}return Array(a,b,c,d,e)}function sha1_ft(t,b,c,d){return 20>t?b&c|~b&d:40>t?b^c^d:60>t?b&c|b&d|c&d:b^c^d}function sha1_kt(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function safe_add(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw}function rol(num,cnt){return num<<cnt|num>>>32-cnt}var helpers=require("./helpers");module.exports=function(buf){return helpers.hash(buf,core_sha1,20,!0)}},{"./helpers":26}],31:[function(require,module){var helpers=require("./helpers"),safe_add=function(x,y){var lsw=(65535&x)+(65535&y),msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|65535&lsw},S=function(X,n){return X>>>n|X<<32-n},R=function(X,n){return X>>>n},Ch=function(x,y,z){return x&y^~x&z},Maj=function(x,y,z){return x&y^x&z^y&z},Sigma0256=function(x){return S(x,2)^S(x,13)^S(x,22)},Sigma1256=function(x){return S(x,6)^S(x,11)^S(x,25)},Gamma0256=function(x){return S(x,7)^S(x,18)^R(x,3)},Gamma1256=function(x){return S(x,17)^S(x,19)^R(x,10)},core_sha256=function(m,l){var a,b,c,d,e,f,g,h,i,j,T1,T2,K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),HASH=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),W=new Array(64);m[l>>5]|=128<<24-l%32,m[(l+64>>9<<4)+15]=l;for(var i=0;i<m.length;i+=16){a=HASH[0],b=HASH[1],c=HASH[2],d=HASH[3],e=HASH[4],f=HASH[5],g=HASH[6],h=HASH[7];for(var j=0;64>j;j++)W[j]=16>j?m[j+i]:safe_add(safe_add(safe_add(Gamma1256(W[j-2]),W[j-7]),Gamma0256(W[j-15])),W[j-16]),T1=safe_add(safe_add(safe_add(safe_add(h,Sigma1256(e)),Ch(e,f,g)),K[j]),W[j]),T2=safe_add(Sigma0256(a),Maj(a,b,c)),h=g,g=f,f=e,e=safe_add(d,T1),d=c,c=b,b=a,a=safe_add(T1,T2);HASH[0]=safe_add(a,HASH[0]),HASH[1]=safe_add(b,HASH[1]),HASH[2]=safe_add(c,HASH[2]),HASH[3]=safe_add(d,HASH[3]),HASH[4]=safe_add(e,HASH[4]),HASH[5]=safe_add(f,HASH[5]),HASH[6]=safe_add(g,HASH[6]),HASH[7]=safe_add(h,HASH[7])}return HASH};module.exports=function(buf){return helpers.hash(buf,core_sha256,32,!0)}},{"./helpers":26}],32:[function(require,module){function noop(){}var process=module.exports={};process.nextTick=function(){var canSetImmediate="undefined"!=typeof window&&window.setImmediate,canPost="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener("message",function(ev){var source=ev.source;if((source===window||null===source)&&"process-tick"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage("process-tick","*")}}return function(fn){setTimeout(fn,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.once=noop,process.off=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[1]);